{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/js/controllers/news_controller.js","webpack:///./resources/js/controllers/current_time_controller.js","webpack:///./node_modules/turbolinks/dist/turbolinks.js","webpack:///./resources/js/lib/format_date.js","webpack:///./node_modules/@stimulus/core/dist/src/event_listener.js","webpack:///./node_modules/@stimulus/core/dist/src/dispatcher.js","webpack:///./node_modules/@stimulus/core/dist/src/action_descriptor.js","webpack:///./node_modules/@stimulus/core/dist/src/action.js","webpack:///./node_modules/@stimulus/core/dist/src/binding.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/element_observer.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/attribute_observer.js","webpack:///./node_modules/@stimulus/multimap/dist/src/set_operations.js","webpack:///./node_modules/@stimulus/multimap/dist/src/multimap.js","webpack:///./node_modules/@stimulus/multimap/dist/src/indexed_multimap.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/token_list_observer.js","webpack:///./node_modules/@stimulus/mutation-observers/dist/src/value_list_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/binding_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/context.js","webpack:///./node_modules/@stimulus/core/dist/src/definition.js","webpack:///./node_modules/@stimulus/core/dist/src/module.js","webpack:///./node_modules/@stimulus/core/dist/src/data_map.js","webpack:///./node_modules/@stimulus/core/dist/src/selectors.js","webpack:///./node_modules/@stimulus/core/dist/src/target_set.js","webpack:///./node_modules/@stimulus/core/dist/src/scope.js","webpack:///./node_modules/@stimulus/core/dist/src/scope_observer.js","webpack:///./node_modules/@stimulus/core/dist/src/router.js","webpack:///./node_modules/@stimulus/core/dist/src/schema.js","webpack:///./node_modules/@stimulus/core/dist/src/application.js","webpack:///./node_modules/@stimulus/core/dist/src/target_properties.js","webpack:///./node_modules/@stimulus/core/dist/src/controller.js","webpack:///./resources/js/controllers/one_news_controller.js","webpack:///./resources/js/app.js","webpack:///./node_modules/@stimulus/webpack-helpers/dist/index.js","webpack:///./resources/js/controllers sync \\.js$","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","this","newsTemplate","document","getElementById","innerHTML","addEventListener","loadMoreNews","getNews","news","values","sort","a","b","Date","pubDate","fetch","response","ok","json","template","params","entries","reduce","memo","val","replace","RegExp","loading","needLoad","itemTargets","lastIndex","length","element","classList","add","newsTarget","slice","_item","item","formatLong","link","internalLink","renderTemplate","targets","rect","getBoundingClientRect","bottom","top","window","innerHeight","documentElement","clientHeight","Controller","tick","updateDay","updateWeek","updateHours","updateMinutes","updateMonth","timer","setInterval","dayNumber","monthNumber","dayTarget","textContent","getDate","hours","getHours","hoursTarget","pad","minutes","getMinutes","minutesTarget","month","getMonth","monthTarget","week","getDay","weekTarget","getWeekDay","number","toString","padStart","clearInterval","Turbolinks","supported","history","pushState","requestAnimationFrame","visit","e","controller","clearCache","setProgressBarDelay","copyObject","closest","nodeType","Node","ELEMENT_NODE","parentNode","defer","setTimeout","throttle","arguments","apply","dispatch","u","target","cancelable","data","createEvent","initEvent","preventDefault","defaultPrevented","dispatchEvent","match","matchesSelector","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","uuid","Math","floor","random","Location","createElement","href","absoluteURL","hash","requestURL","anchor","wrap","getOrigin","split","join","getPath","getPathComponents","getLastPathComponent","getExtension","isHTML","isPrefixedBy","isEqualTo","toCacheKey","toJSON","valueOf","HttpRequest","delegate","requestCanceled","requestTimedOut","requestFailed","requestLoaded","requestProgressed","url","referrer","createXHR","NETWORK_FAILURE","TIMEOUT_FAILURE","timeout","send","xhr","sent","notifyApplicationBeforeRequestStart","setProgress","requestStarted","cancel","abort","lengthComputable","loaded","total","endRequest","status","requestCompletedWithResponse","responseText","getResponseHeader","failed","requestFailedWithStatusCode","constructor","notifyApplicationAfterRequestEnd","XMLHttpRequest","open","setRequestHeader","onprogress","onload","onerror","ontimeout","onabort","destroy","progress","requestFinished","ProgressBar","trickle","stylesheetElement","createStylesheetElement","progressElement","createProgressElement","defaultCSS","show","visible","installStylesheetElement","installProgressElement","startTrickling","hide","hiding","fadeProgressElement","uninstallProgressElement","stopTrickling","setValue","refresh","head","insertBefore","firstChild","style","width","opacity","body","removeChild","trickleInterval","type","className","BrowserAdapter","showProgressBar","progressBar","visitProposedToLocationWithAction","startVisitToLocationWithAction","visitStarted","issueRequest","changeHistory","loadCachedSnapshot","visitRequestStarted","hasCachedSnapshot","action","showProgressBarAfterDelay","visitRequestProgressed","visitRequestCompleted","loadResponse","visitRequestFailedWithStatusCode","reload","visitRequestFinished","hideProgressBar","visitCompleted","followRedirect","pageInvalidated","progressBarTimeout","progressBarDelay","clearTimeout","location","History","onPageLoad","onPopState","start","started","stop","removeEventListener","push","update","shouldHandlePopState","state","turbolinks","restorationIdentifier","historyPoppedToLocationWithRestorationIdentifier","pageLoaded","pageIsLoaded","readyState","HeadDetails","elements","outerHTML","tracked","fromHeadElement","childNodes","hasElementWithKey","getTrackedElementSignature","getScriptElementsNotInDetails","getElementsMatchingTypeNotInDetails","getStylesheetElementsNotInDetails","getProvisionalElements","getMetaValue","findMetaElementByName","getAttribute","tagName","toLowerCase","Snapshot","headDetails","bodyElement","fromHTMLString","fromHTMLElement","querySelector","clone","cloneNode","getRootLocation","getSetting","getCacheControlValue","getElementForAnchor","getPermanentElements","querySelectorAll","getPermanentElementById","getPermanentElementsPresentInSnapshot","id","findFirstAutofocusableElement","hasAnchor","isPreviewable","isCacheable","isVisitable","Renderer","render","renderView","viewWillRender","newBody","viewRendered","invalidateView","viewInvalidated","createScriptElement","async","attributes","setAttribute","__super__","SnapshotRenderer","currentSnapshot","newSnapshot","isPreview","currentHeadDetails","newHeadDetails","currentBody","shouldRender","mergeHead","replaceBody","focusFirstAutofocusableElement","copyNewHeadStylesheetElements","copyNewHeadScriptElements","removeCurrentHeadProvisionalElements","copyNewHeadProvisionalElements","relocateCurrentBodyPermanentElements","activateNewBodyScriptElements","assignNewBody","replacePlaceholderElementsWithClonedPermanentElements","trackedElementsAreIdentical","getNewHeadStylesheetElements","appendChild","getNewHeadScriptElements","getCurrentHeadProvisionalElements","getNewHeadProvisionalElements","getCurrentBodyPermanentElements","permanentElement","getNewBodyScriptElements","focus","replaceChild","ErrorRenderer","newHead","replaceHeadAndBody","activateBodyScriptElements","getScriptElements","View","htmlElement","getSnapshot","snapshot","error","markAsPreview","renderSnapshot","renderError","removeAttribute","ScrollManager","onScroll","scrollToElement","scrollIntoView","scrollToPosition","x","y","scrollTo","updatePosition","pageXOffset","pageYOffset","position","scrollPositionChanged","SnapshotCache","size","keys","snapshots","has","read","touch","put","write","indexOf","splice","unshift","trim","Visit","performScroll","identifier","adapter","timingMetrics","recordTimingMetric","request","cancelRender","complete","fail","visitFailed","historyChanged","shouldIssueRequest","getCachedSnapshot","getCachedSnapshotForLocation","cacheSnapshot","visitRendered","redirectedToLocation","followedRedirect","replaceHistoryWithLocationAndRestorationIdentifier","scrolled","scrollToRestoredPosition","scrollToTop","scrollToAnchor","restorationData","scrollPosition","getTime","getTimingMetrics","snapshotCached","frame","cancelAnimationFrame","clickBubbled","clickCaptured","view","scrollManager","startHistory","enabled","disable","stopHistory","cache","applicationAllowsVisitingLocation","locationIsVisitable","getRestorationDataForIdentifier","startVisit","pushHistoryWithLocationAndRestorationIdentifier","shouldCacheSnapshot","notifyApplicationBeforeCachingSnapshot","lastRenderedLocation","getCurrentRestorationData","notifyApplicationBeforeRender","currentVisit","notifyApplicationAfterRender","notifyApplicationAfterPageLoad","clickEventIsSignificant","getVisitableLinkForNode","getVisitableLocationForLink","applicationAllowsFollowingLinkToLocation","getActionForLink","notifyApplicationAfterClickingLinkToLocation","notifyApplicationBeforeVisitingLocation","notifyApplicationAfterVisitingLocation","timing","createVisit","isContentEditable","which","altKey","ctrlKey","metaKey","shiftKey","nodeIsVisitable","currentScript","hasAttribute","console","warn","dateStr","date","DD","MM","YY","getFullYear","HH","mm","SS","getSeconds","EventListener","eventTarget","eventName","unorderedBindings","Set","connect","disconnect","bindingConnected","binding","bindingDisconnected","delete","handleEvent","event","extendedEvent","stopImmediatePropagation_1","stopImmediatePropagation","assign","immediatePropagationStopped","extendEvent","_i","_a","bindings","Array","from","left","right","leftIndex","index","rightIndex","configurable","Dispatcher","application","eventListenerMaps","Map","eventListeners","forEach","eventListener","listeners","map","concat","fetchEventListenerForBinding","handleError","message","detail","fetchEventListener","eventListenerMap","fetchEventListenerMapForEventTarget","createEventListener","set","descriptorPattern","Action","descriptor","defaultEventNames","getDefaultEventNameForElement","methodName","forToken","token","descriptorString","content","matches","eventTargetName","eventNameSuffix","Error","Binding","context","willBeInvokedByEvent","invokeWithEvent","method","Element","contains","scope","containsElement","ElementObserver","_this","mutationObserver","MutationObserver","mutations","processMutations","observe","childList","subtree","takeRecords","matchElementsInTree","removeElement","_b","_c","addElement","mutations_1","mutation","processMutation","processAttributeChange","attributeName","processRemovedNodes","removedNodes","processAddedNodes","addedNodes","node","elementAttributeChanged","matchElement","nodes","elementFromNode","processTree","elementIsActive","tree","processor","isConnected","elementMatched","elementUnmatched","AttributeObserver","elementObserver","selector","elementMatchedAttribute","elementUnmatchedAttribute","elementAttributeValueChanged","del","prune","extendStatics","Multimap","valuesByKey","hasKey","hasValue","some","getValuesForKey","getKeysForValue","filter","__extends","setPrototypeOf","__proto__","__","_super","IndexedMultimap","keysByValue","TokenListObserver","attributeObserver","tokensByElement","tokensMatched","readTokensForElement","refreshTokensForElement","unmatchedTokens","matchedTokens","tokensUnmatched","tokens","tokenMatched","tokenUnmatched","previousTokens","currentTokens","firstDifferingIndex","max","_","findIndex","tokensAreEqual","tokenString","parseTokenString","ValueListObserver","tokenListObserver","parseResultsByToken","WeakMap","valuesByTokenByElement","fetchParseResultForToken","fetchValuesByTokenForElement","elementMatchedValue","elementUnmatchedValue","parseResult","parseToken","valuesByToken","parseValueForToken","BindingObserver","bindingsByAction","valueListObserver","actionAttribute","disconnectAllActions","schema","connectAction","disconnectAction","clear","Context","controllerConstructor","bindingObserver","dispatcher","initialize","parentElement","blessControllerConstructor","extend","bless","extendWithReflect","_newTarget","Reflect","construct","Module","definition","blessDefinition","contextsByScope","connectedContexts","connectContextForScope","fetchContextForScope","disconnectContextForScope","DataMap","getFormattedKey","char","attributeValueContainsToken","TargetSet","targetName","find","targetNames","getSelectorForTargetNames","findElement","findAll","findAllElements","getSelectorForTargetName","targetDescriptor","targetAttribute","Scope","tail","filterElements","controllerSelector","controllerAttribute","ScopeObserver","scopesByIdentifierByElement","scopeReferenceCounts","scopesByIdentifier","fetchScopesByIdentifierForElement","referenceCount","scopeConnected","scopeDisconnected","Router","scopeObserver","modulesByIdentifier","contexts","loadDefinition","unloadIdentifier","connectModule","disconnectModule","getContextForElementAndIdentifier","defaultSchema","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","f","g","label","trys","ops","verb","iterator","v","op","TypeError","pop","Application","router","register","load","rest","definitions","isArray","unload","identifiers","getControllerForElementAndIdentifier","defineTargetProperties","ancestors","getPrototypeOf","getAncestorsForConstructor","getOwnTargetNamesForConstructor","getTargetNamesForConstructor","properties","charAt","toUpperCase","capitalize","baseURI","includes","require","logicalName","identifierForContextKey","default","definitionForModuleAndIdentifier","definitionForModuleWithContextAndKey","definitionsFromContext","webpackContext","req","webpackContextResolve","code","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","_invoke","arg","doneResult","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","fn","obj","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","undefined","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","iter","reverse","skipTempReset","prev","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function"],"mappings":"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","file":"/js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-disable no-useless-escape */\nimport { Controller } from 'stimulus';\nimport { formatLong } from '../lib/format_date';\n\nconst PORTION_COUNT = 7;\n\nexport default class extends Controller {\n    static targets = ['item', 'news'];\n\n    loading = false;\n\n    async connect() {\n        this.newsTemplate = document.getElementById('news-template').innerHTML;\n\n        document.addEventListener('scroll', () => this.loadMoreNews());\n\n        this.news = Object.values(await this.getNews()).sort(\n            (a, b) => new Date(b.pubDate) - new Date(a.pubDate),\n        );\n        this.loadMoreNews();\n    }\n\n    async getNews() {\n        const response = await fetch('/api/last-news.json');\n        if (response.ok) {\n            return response.json();\n        }\n    }\n\n    renderTemplate(template, params) {\n        return Object.entries(params).reduce(\n            (memo, [key, val]) =>\n                memo.replace(\n                    // eslint-disable-next-line no-useless-escape\n                    new RegExp(`\\\\{\\\\{\\\\s*\\\\$${key}\\\\s*\\\\}\\\\}`, 'gm'),\n                    val,\n                ),\n            template,\n        );\n    }\n\n    loadMoreNews() {\n        if (!this.news || this.loading || !this.needLoad(this.itemTargets)) {\n            return;\n        }\n\n        this.loading = true;\n\n        const lastIndex = this.itemTargets.length;\n\n        if (lastIndex === this.news.length) {\n            this.element.classList.add('news-ended');\n        }\n\n        this.newsTarget.innerHTML += this.news\n            .slice(lastIndex, lastIndex + PORTION_COUNT)\n            .reduce(\n                (memo, _item) => {\n                    const item = {\n                        ..._item,\n                        pubDate: formatLong(_item.pubDate),\n                        link: _item.internalLink,\n                    };\n                    return memo + this.renderTemplate(this.newsTemplate, item);\n                },\n\n                '',\n            );\n\n        this.loading = false;\n\n        return this.loadMoreNews();\n    }\n\n    needLoad(targets) {\n        const lastTarget = targets[targets.length - 1];\n        const rect = lastTarget.getBoundingClientRect();\n\n        return (\n            rect.bottom !== 0 &&\n            rect.top <\n                (window.innerHeight || document.documentElement.clientHeight) +\n                    300\n        );\n    }\n}\n","import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n    /**\n     *\n     * @type {[string, string]}\n     */\n    static targets = ['minutes', 'hours', 'month', 'day', 'week'];\n\n    /**\n     *\n     */\n    connect() {\n        const tick = () =>\n            this.updateDay()\n                .updateWeek()\n                .updateHours()\n                .updateMinutes()\n                .updateMonth();\n\n        tick();\n\n        this.timer = setInterval(tick, 10000);\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    getWeekDay(dayNumber) {\n        return [\n            'воскресенье',\n            'понедельник',\n            'вторник',\n            'среда',\n            'четверг',\n            'пятница',\n            'суббота',\n        ][dayNumber];\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    getMonth(monthNumber) {\n        return [\n            'января',\n            'февраля',\n            'марта',\n            'апреля',\n            'мая',\n            'июня',\n            'июля',\n            'августа',\n            'сентября',\n            'октября',\n            'ноября',\n            'декабря',\n        ][monthNumber];\n    }\n\n    /**\n     *\n     */\n    updateDay() {\n        this.dayTarget.textContent = new Date().getDate();\n\n        return this;\n    }\n\n    /**\n     *\n     */\n    updateHours() {\n        let hours = new Date().getHours();\n        this.hoursTarget.textContent = this.pad(hours);\n\n        return this;\n    }\n\n    /**\n     *\n     */\n    updateMinutes() {\n        let minutes = new Date().getMinutes();\n        this.minutesTarget.textContent = this.pad(minutes);\n\n        return this;\n    }\n\n    /**\n     *\n     */\n    updateMonth() {\n        let month = new Date().getMonth();\n        this.monthTarget.textContent = this.getMonth(month);\n\n        return this;\n    }\n\n    /**\n     *\n     */\n    updateWeek() {\n        let week = new Date().getDay();\n        this.weekTarget.textContent = this.getWeekDay(week);\n\n        return this;\n    }\n\n    /**\n     *\n     * @param number\n     * @returns {string|*}\n     */\n    pad(number) {\n        return number.toString().padStart(2, 0);\n    }\n\n    /**\n     * Clear time\n     */\n    disconnect() {\n        clearInterval(this.timer);\n    }\n}\n","/*\nTurbolinks 5.2.0\nCopyright © 2018 Basecamp, LLC\n */\n(function(){var t=this;(function(){(function(){this.Turbolinks={supported:function(){return null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener}(),visit:function(t,r){return e.controller.visit(t,r)},clearCache:function(){return e.controller.clearCache()},setProgressBarDelay:function(t){return e.controller.setProgressBarDelay(t)}}}).call(this)}).call(t);var e=t.Turbolinks;(function(){(function(){var t,r,n,o=[].slice;e.copyObject=function(t){var e,r,n;r={};for(e in t)n=t[e],r[e]=n;return r},e.closest=function(e,r){return t.call(e,r)},t=function(){var t,e;return t=document.documentElement,null!=(e=t.closest)?e:function(t){var e;for(e=this;e;){if(e.nodeType===Node.ELEMENT_NODE&&r.call(e,t))return e;e=e.parentNode}}}(),e.defer=function(t){return setTimeout(t,1)},e.throttle=function(t){var e;return e=null,function(){var r;return r=1<=arguments.length?o.call(arguments,0):[],null!=e?e:e=requestAnimationFrame(function(n){return function(){return e=null,t.apply(n,r)}}(this))}},e.dispatch=function(t,e){var r,o,i,s,a,u;return a=null!=e?e:{},u=a.target,r=a.cancelable,o=a.data,i=document.createEvent(\"Events\"),i.initEvent(t,!0,r===!0),i.data=null!=o?o:{},i.cancelable&&!n&&(s=i.preventDefault,i.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,\"defaultPrevented\",{get:function(){return!0}}),s.call(this)}),(null!=u?u:document).dispatchEvent(i),i},n=function(){var t;return t=document.createEvent(\"Events\"),t.initEvent(\"test\",!0,!0),t.preventDefault(),t.defaultPrevented}(),e.match=function(t,e){return r.call(t,e)},r=function(){var t,e,r,n;return t=document.documentElement,null!=(e=null!=(r=null!=(n=t.matchesSelector)?n:t.webkitMatchesSelector)?r:t.msMatchesSelector)?e:t.mozMatchesSelector}(),e.uuid=function(){var t,e,r;for(r=\"\",t=e=1;36>=e;t=++e)r+=9===t||14===t||19===t||24===t?\"-\":15===t?\"4\":20===t?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return r}}).call(this),function(){e.Location=function(){function t(t){var e,r;null==t&&(t=\"\"),r=document.createElement(\"a\"),r.href=t.toString(),this.absoluteURL=r.href,e=r.hash.length,2>e?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-e),this.anchor=r.hash.slice(1))}var e,r,n,o;return t.wrap=function(t){return t instanceof this?t:new this(t)},t.prototype.getOrigin=function(){return this.absoluteURL.split(\"/\",3).join(\"/\")},t.prototype.getPath=function(){var t,e;return null!=(t=null!=(e=this.requestURL.match(/\\/\\/[^\\/]*(\\/[^?;]*)/))?e[1]:void 0)?t:\"/\"},t.prototype.getPathComponents=function(){return this.getPath().split(\"/\").slice(1)},t.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},t.prototype.getExtension=function(){var t,e;return null!=(t=null!=(e=this.getLastPathComponent().match(/\\.[^.]*$/))?e[0]:void 0)?t:\"\"},t.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\\.(?:htm|html|xhtml))$/)},t.prototype.isPrefixedBy=function(t){var e;return e=r(t),this.isEqualTo(t)||o(this.absoluteURL,e)},t.prototype.isEqualTo=function(t){return this.absoluteURL===(null!=t?t.absoluteURL:void 0)},t.prototype.toCacheKey=function(){return this.requestURL},t.prototype.toJSON=function(){return this.absoluteURL},t.prototype.toString=function(){return this.absoluteURL},t.prototype.valueOf=function(){return this.absoluteURL},r=function(t){return e(t.getOrigin()+t.getPath())},e=function(t){return n(t,\"/\")?t:t+\"/\"},o=function(t,e){return t.slice(0,e.length)===e},n=function(t,e){return t.slice(-e.length)===e},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.HttpRequest=function(){function r(r,n,o){this.delegate=r,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=e.Location.wrap(n).requestURL,this.referrer=e.Location.wrap(o).absoluteURL,this.createXHR()}return r.NETWORK_FAILURE=0,r.TIMEOUT_FAILURE=-1,r.timeout=60,r.prototype.send=function(){var t;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,\"function\"==typeof(t=this.delegate).requestStarted?t.requestStarted():void 0):void 0},r.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},r.prototype.requestProgressed=function(t){return t.lengthComputable?this.setProgress(t.loaded/t.total):void 0},r.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e;return 200<=(e=t.xhr.status)&&300>e?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader(\"Turbolinks-Location\")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},r.prototype.requestFailed=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.NETWORK_FAILURE)}}(this))},r.prototype.requestTimedOut=function(){return this.endRequest(function(t){return function(){return t.failed=!0,t.delegate.requestFailedWithStatusCode(t.constructor.TIMEOUT_FAILURE)}}(this))},r.prototype.requestCanceled=function(){return this.endRequest()},r.prototype.notifyApplicationBeforeRequestStart=function(){return e.dispatch(\"turbolinks:request-start\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.notifyApplicationAfterRequestEnd=function(){return e.dispatch(\"turbolinks:request-end\",{data:{url:this.url,xhr:this.xhr}})},r.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open(\"GET\",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader(\"Accept\",\"text/html, application/xhtml+xml\"),this.xhr.setRequestHeader(\"Turbolinks-Referrer\",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},r.prototype.endRequest=function(t){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=t&&t.call(this),this.destroy()):void 0},r.prototype.setProgress=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.delegate).requestProgressed?e.requestProgressed(this.progress):void 0},r.prototype.destroy=function(){var t;return this.setProgress(1),\"function\"==typeof(t=this.delegate).requestFinished&&t.requestFinished(),this.delegate=null,this.xhr=null},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ProgressBar=function(){function e(){this.trickle=t(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var r;return r=300,e.defaultCSS=\".turbolinks-progress-bar {\\n  position: fixed;\\n  display: block;\\n  top: 0;\\n  left: 0;\\n  height: 3px;\\n  background: #0076ff;\\n  z-index: 9999;\\n  transition: width \"+r+\"ms ease-out, opacity \"+r/2+\"ms \"+r/2+\"ms ease-in;\\n  transform: translate3d(0, 0, 0);\\n}\",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(t){return function(){return t.uninstallProgressElement(),t.stopTrickling(),t.visible=!1,t.hiding=!1}}(this))):void 0},e.prototype.setValue=function(t){return this.value=t,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(t){return this.progressElement.style.opacity=0,setTimeout(t,1.5*r)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,r)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame(function(t){return function(){return t.progressElement.style.width=10+90*t.value+\"%\"}}(this))},e.prototype.createStylesheetElement=function(){var t;return t=document.createElement(\"style\"),t.type=\"text/css\",t.textContent=this.constructor.defaultCSS,t},e.prototype.createProgressElement=function(){var t;return t=document.createElement(\"div\"),t.className=\"turbolinks-progress-bar\",t},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.BrowserAdapter=function(){function r(r){this.controller=r,this.showProgressBar=t(this.showProgressBar,this),this.progressBar=new e.ProgressBar}var n,o,i;return i=e.HttpRequest,n=i.NETWORK_FAILURE,o=i.TIMEOUT_FAILURE,r.prototype.visitProposedToLocationWithAction=function(t,e){return this.controller.startVisitToLocationWithAction(t,e)},r.prototype.visitStarted=function(t){return t.issueRequest(),t.changeHistory(),t.loadCachedSnapshot()},r.prototype.visitRequestStarted=function(t){return this.progressBar.setValue(0),t.hasCachedSnapshot()||\"restore\"!==t.action?this.showProgressBarAfterDelay():this.showProgressBar()},r.prototype.visitRequestProgressed=function(t){return this.progressBar.setValue(t.progress)},r.prototype.visitRequestCompleted=function(t){return t.loadResponse()},r.prototype.visitRequestFailedWithStatusCode=function(t,e){switch(e){case n:case o:return this.reload();default:return t.loadResponse()}},r.prototype.visitRequestFinished=function(t){return this.hideProgressBar()},r.prototype.visitCompleted=function(t){return t.followRedirect()},r.prototype.pageInvalidated=function(){return this.reload()},r.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},r.prototype.showProgressBar=function(){return this.progressBar.show()},r.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},r.prototype.reload=function(){return window.location.reload()},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.History=function(){function r(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"popstate\",this.onPopState,!1),addEventListener(\"load\",this.onPageLoad,!1),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"popstate\",this.onPopState,!1),removeEventListener(\"load\",this.onPageLoad,!1),this.started=!1):void 0},r.prototype.push=function(t,r){return t=e.Location.wrap(t),this.update(\"push\",t,r)},r.prototype.replace=function(t,r){return t=e.Location.wrap(t),this.update(\"replace\",t,r)},r.prototype.onPopState=function(t){var r,n,o,i;return this.shouldHandlePopState()&&(i=null!=(n=t.state)?n.turbolinks:void 0)?(r=e.Location.wrap(window.location),o=i.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(r,o)):void 0},r.prototype.onPageLoad=function(t){return e.defer(function(t){return function(){return t.pageLoaded=!0}}(this))},r.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},r.prototype.pageIsLoaded=function(){return this.pageLoaded||\"complete\"===document.readyState},r.prototype.update=function(t,e,r){var n;return n={turbolinks:{restorationIdentifier:r}},history[t+\"State\"](n,null,e)},r}()}.call(this),function(){e.HeadDetails=function(){function t(t){var e,r,n,s,a,u;for(this.elements={},n=0,a=t.length;a>n;n++)u=t[n],u.nodeType===Node.ELEMENT_NODE&&(s=u.outerHTML,r=null!=(e=this.elements)[s]?e[s]:e[s]={type:i(u),tracked:o(u),elements:[]},r.elements.push(u))}var e,r,n,o,i;return t.fromHeadElement=function(t){var e;return new this(null!=(e=null!=t?t.childNodes:void 0)?e:[])},t.prototype.hasElementWithKey=function(t){return t in this.elements},t.prototype.getTrackedElementSignature=function(){var t,e;return function(){var r,n;r=this.elements,n=[];for(t in r)e=r[t].tracked,e&&n.push(t);return n}.call(this).join(\"\")},t.prototype.getScriptElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"script\",t)},t.prototype.getStylesheetElementsNotInDetails=function(t){return this.getElementsMatchingTypeNotInDetails(\"stylesheet\",t)},t.prototype.getElementsMatchingTypeNotInDetails=function(t,e){var r,n,o,i,s,a;o=this.elements,s=[];for(n in o)i=o[n],a=i.type,r=i.elements,a!==t||e.hasElementWithKey(n)||s.push(r[0]);return s},t.prototype.getProvisionalElements=function(){var t,e,r,n,o,i,s;r=[],n=this.elements;for(e in n)o=n[e],s=o.type,i=o.tracked,t=o.elements,null!=s||i?t.length>1&&r.push.apply(r,t.slice(1)):r.push.apply(r,t);return r},t.prototype.getMetaValue=function(t){var e;return null!=(e=this.findMetaElementByName(t))?e.getAttribute(\"content\"):void 0},t.prototype.findMetaElementByName=function(t){var r,n,o,i;r=void 0,i=this.elements;for(o in i)n=i[o].elements,e(n[0],t)&&(r=n[0]);return r},i=function(t){return r(t)?\"script\":n(t)?\"stylesheet\":void 0},o=function(t){return\"reload\"===t.getAttribute(\"data-turbolinks-track\")},r=function(t){var e;return e=t.tagName.toLowerCase(),\"script\"===e},n=function(t){var e;return e=t.tagName.toLowerCase(),\"style\"===e||\"link\"===e&&\"stylesheet\"===t.getAttribute(\"rel\")},e=function(t,e){var r;return r=t.tagName.toLowerCase(),\"meta\"===r&&t.getAttribute(\"name\")===e},t}()}.call(this),function(){e.Snapshot=function(){function t(t,e){this.headDetails=t,this.bodyElement=e}return t.wrap=function(t){return t instanceof this?t:\"string\"==typeof t?this.fromHTMLString(t):this.fromHTMLElement(t)},t.fromHTMLString=function(t){var e;return e=document.createElement(\"html\"),e.innerHTML=t,this.fromHTMLElement(e)},t.fromHTMLElement=function(t){var r,n,o,i;return o=t.querySelector(\"head\"),r=null!=(i=t.querySelector(\"body\"))?i:document.createElement(\"body\"),n=e.HeadDetails.fromHeadElement(o),new this(n,r)},t.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},t.prototype.getRootLocation=function(){var t,r;return r=null!=(t=this.getSetting(\"root\"))?t:\"/\",new e.Location(r)},t.prototype.getCacheControlValue=function(){return this.getSetting(\"cache-control\")},t.prototype.getElementForAnchor=function(t){try{return this.bodyElement.querySelector(\"[id='\"+t+\"'], a[name='\"+t+\"']\")}catch(e){}},t.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll(\"[id][data-turbolinks-permanent]\")},t.prototype.getPermanentElementById=function(t){return this.bodyElement.querySelector(\"#\"+t+\"[data-turbolinks-permanent]\")},t.prototype.getPermanentElementsPresentInSnapshot=function(t){var e,r,n,o,i;for(o=this.getPermanentElements(),i=[],r=0,n=o.length;n>r;r++)e=o[r],t.getPermanentElementById(e.id)&&i.push(e);return i},t.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector(\"[autofocus]\")},t.prototype.hasAnchor=function(t){return null!=this.getElementForAnchor(t)},t.prototype.isPreviewable=function(){return\"no-preview\"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return\"no-cache\"!==this.getCacheControlValue()},t.prototype.isVisitable=function(){return\"reload\"!==this.getSetting(\"visit-control\")},t.prototype.getSetting=function(t){return this.headDetails.getMetaValue(\"turbolinks-\"+t)},t}()}.call(this),function(){var t=[].slice;e.Renderer=function(){function e(){}var r;return e.render=function(){var e,r,n,o;return n=arguments[0],r=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],o=function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(this,e,function(){}),o.delegate=n,o.render(r),o},e.prototype.renderView=function(t){return this.delegate.viewWillRender(this.newBody),t(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(t){var e;return\"false\"===t.getAttribute(\"data-turbolinks-eval\")?t:(e=document.createElement(\"script\"),e.textContent=t.textContent,e.async=!1,r(e,t),e)},r=function(t,e){var r,n,o,i,s,a,u;for(i=e.attributes,a=[],r=0,n=i.length;n>r;r++)s=i[r],o=s.name,u=s.value,a.push(t.setAttribute(o,u));return a},e}()}.call(this),function(){var t,r,n=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;e.SnapshotRenderer=function(e){function o(t,e,r){this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=r,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return n(o,e),o.prototype.render=function(t){return this.shouldRender()?(this.mergeHead(),this.renderView(function(e){return function(){return e.replaceBody(),e.isPreview||e.focusFirstAutofocusableElement(),t()}}(this))):this.invalidateView()},o.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},o.prototype.replaceBody=function(){var t;return t=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(t)},o.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},o.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},o.prototype.copyNewHeadStylesheetElements=function(){var t,e,r,n,o;for(n=this.getNewHeadStylesheetElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.copyNewHeadScriptElements=function(){var t,e,r,n,o;for(n=this.getNewHeadScriptElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(this.createScriptElement(t)));return o},o.prototype.removeCurrentHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getCurrentHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.removeChild(t));return o},o.prototype.copyNewHeadProvisionalElements=function(){var t,e,r,n,o;for(n=this.getNewHeadProvisionalElements(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(document.head.appendChild(t));return o},o.prototype.relocateCurrentBodyPermanentElements=function(){var e,n,o,i,s,a,u;for(a=this.getCurrentBodyPermanentElements(),u=[],e=0,n=a.length;n>e;e++)i=a[e],s=t(i),o=this.newSnapshot.getPermanentElementById(i.id),r(i,s.element),r(o,i),u.push(s);return u},o.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(t){var e,n,o,i,s,a,u;for(u=[],o=0,i=t.length;i>o;o++)a=t[o],n=a.element,s=a.permanentElement,e=s.cloneNode(!0),u.push(r(n,e));return u},o.prototype.activateNewBodyScriptElements=function(){var t,e,n,o,i,s;for(i=this.getNewBodyScriptElements(),s=[],e=0,o=i.length;o>e;e++)n=i[e],t=this.createScriptElement(n),s.push(r(n,t));return s},o.prototype.assignNewBody=function(){return document.body=this.newBody},o.prototype.focusFirstAutofocusableElement=function(){var t;return null!=(t=this.newSnapshot.findFirstAutofocusableElement())?t.focus():void 0},o.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},o.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},o.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},o.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},o.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},o.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll(\"script\")},o}(e.Renderer),t=function(t){var e;return e=document.createElement(\"meta\"),e.setAttribute(\"name\",\"turbolinks-permanent-placeholder\"),e.setAttribute(\"content\",t.id),{element:e,permanentElement:t}},r=function(t,e){var r;return(r=t.parentNode)?r.replaceChild(e,t):void 0}}.call(this),function(){var t=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e.ErrorRenderer=function(e){function r(t){var e;e=document.createElement(\"html\"),e.innerHTML=t,this.newHead=e.querySelector(\"head\"),this.newBody=e.querySelector(\"body\")}return t(r,e),r.prototype.render=function(t){return this.renderView(function(e){return function(){return e.replaceHeadAndBody(),e.activateBodyScriptElements(),t()}}(this))},r.prototype.replaceHeadAndBody=function(){var t,e;return e=document.head,t=document.body,e.parentNode.replaceChild(this.newHead,e),t.parentNode.replaceChild(this.newBody,t)},r.prototype.activateBodyScriptElements=function(){var t,e,r,n,o,i;for(n=this.getScriptElements(),i=[],e=0,r=n.length;r>e;e++)o=n[e],t=this.createScriptElement(o),i.push(o.parentNode.replaceChild(t,o));return i},r.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll(\"script\")},r}(e.Renderer)}.call(this),function(){e.View=function(){function t(t){this.delegate=t,this.htmlElement=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getElementForAnchor=function(t){return this.getSnapshot().getElementForAnchor(t)},t.prototype.getSnapshot=function(){return e.Snapshot.fromHTMLElement(this.htmlElement)},t.prototype.render=function(t,e){var r,n,o;return o=t.snapshot,r=t.error,n=t.isPreview,this.markAsPreview(n),null!=o?this.renderSnapshot(o,n,e):this.renderError(r,e)},t.prototype.markAsPreview=function(t){return t?this.htmlElement.setAttribute(\"data-turbolinks-preview\",\"\"):this.htmlElement.removeAttribute(\"data-turbolinks-preview\")},t.prototype.renderSnapshot=function(t,r,n){return e.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),e.Snapshot.wrap(t),r)},t.prototype.renderError=function(t,r){return e.ErrorRenderer.render(this.delegate,r,t)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.ScrollManager=function(){function r(r){this.delegate=r,this.onScroll=t(this.onScroll,this),this.onScroll=e.throttle(this.onScroll)}return r.prototype.start=function(){return this.started?void 0:(addEventListener(\"scroll\",this.onScroll,!1),this.onScroll(),this.started=!0)},r.prototype.stop=function(){return this.started?(removeEventListener(\"scroll\",this.onScroll,!1),this.started=!1):void 0},r.prototype.scrollToElement=function(t){return t.scrollIntoView()},r.prototype.scrollToPosition=function(t){var e,r;return e=t.x,r=t.y,window.scrollTo(e,r)},r.prototype.onScroll=function(t){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},r.prototype.updatePosition=function(t){var e;return this.position=t,null!=(e=this.delegate)?e.scrollPositionChanged(this.position):void 0},r}()}.call(this),function(){e.SnapshotCache=function(){function t(t){this.size=t,this.keys=[],this.snapshots={}}var r;return t.prototype.has=function(t){var e;return e=r(t),e in this.snapshots},t.prototype.get=function(t){var e;if(this.has(t))return e=this.read(t),this.touch(t),e},t.prototype.put=function(t,e){return this.write(t,e),this.touch(t),e},t.prototype.read=function(t){var e;return e=r(t),this.snapshots[e]},t.prototype.write=function(t,e){var n;return n=r(t),this.snapshots[n]=e},t.prototype.touch=function(t){var e,n;return n=r(t),e=this.keys.indexOf(n),e>-1&&this.keys.splice(e,1),this.keys.unshift(n),this.trim()},t.prototype.trim=function(){var t,e,r,n,o;for(n=this.keys.splice(this.size),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(delete this.snapshots[e]);return o},r=function(t){return e.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Visit=function(){function r(r,n,o){this.controller=r,this.action=o,this.performScroll=t(this.performScroll,this),this.identifier=e.uuid(),this.location=e.Location.wrap(n),this.adapter=this.controller.adapter,this.state=\"initialized\",this.timingMetrics={}}var n;return r.prototype.start=function(){return\"initialized\"===this.state?(this.recordTimingMetric(\"visitStart\"),this.state=\"started\",this.adapter.visitStarted(this)):void 0},r.prototype.cancel=function(){var t;return\"started\"===this.state?(null!=(t=this.request)&&t.cancel(),this.cancelRender(),this.state=\"canceled\"):void 0},r.prototype.complete=function(){var t;return\"started\"===this.state?(this.recordTimingMetric(\"visitEnd\"),this.state=\"completed\",\"function\"==typeof(t=this.adapter).visitCompleted&&t.visitCompleted(this),this.controller.visitCompleted(this)):void 0},r.prototype.fail=function(){var t;return\"started\"===this.state?(this.state=\"failed\",\"function\"==typeof(t=this.adapter).visitFailed?t.visitFailed(this):void 0):void 0},r.prototype.changeHistory=function(){var t,e;return this.historyChanged?void 0:(t=this.location.isEqualTo(this.referrer)?\"replace\":this.action,e=n(t),this.controller[e](this.location,this.restorationIdentifier),this.historyChanged=!0)},r.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new e.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},r.prototype.getCachedSnapshot=function(){var t;return!(t=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!t.hasAnchor(this.location.anchor)||\"restore\"!==this.action&&!t.isPreviewable()?void 0:t},r.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},r.prototype.loadCachedSnapshot=function(){var t,e;return(e=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render(function(){var r;return this.cacheSnapshot(),this.controller.render({snapshot:e,isPreview:t},this.performScroll),\"function\"==typeof(r=this.adapter).visitRendered&&r.visitRendered(this),t?void 0:this.complete()})):void 0},r.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var t,e;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),\"function\"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),\"function\"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.complete())}):void 0},r.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},r.prototype.requestStarted=function(){var t;return this.recordTimingMetric(\"requestStart\"),\"function\"==typeof(t=this.adapter).visitRequestStarted?t.visitRequestStarted(this):void 0},r.prototype.requestProgressed=function(t){var e;return this.progress=t,\"function\"==typeof(e=this.adapter).visitRequestProgressed?e.visitRequestProgressed(this):void 0},r.prototype.requestCompletedWithResponse=function(t,r){return this.response=t,null!=r&&(this.redirectedToLocation=e.Location.wrap(r)),this.adapter.visitRequestCompleted(this)},r.prototype.requestFailedWithStatusCode=function(t,e){return this.response=e,this.adapter.visitRequestFailedWithStatusCode(this,t)},r.prototype.requestFinished=function(){var t;return this.recordTimingMetric(\"requestEnd\"),\"function\"==typeof(t=this.adapter).visitRequestFinished?t.visitRequestFinished(this):void 0},r.prototype.performScroll=function(){return this.scrolled?void 0:(\"restore\"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},r.prototype.scrollToRestoredPosition=function(){var t,e;return t=null!=(e=this.restorationData)?e.scrollPosition:void 0,null!=t?(this.controller.scrollToPosition(t),!0):void 0},r.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},r.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},r.prototype.recordTimingMetric=function(t){var e;return null!=(e=this.timingMetrics)[t]?e[t]:e[t]=(new Date).getTime()},r.prototype.getTimingMetrics=function(){return e.copyObject(this.timingMetrics)},n=function(t){switch(t){case\"replace\":return\"replaceHistoryWithLocationAndRestorationIdentifier\";case\"advance\":case\"restore\":return\"pushHistoryWithLocationAndRestorationIdentifier\"}},r.prototype.shouldIssueRequest=function(){return\"restore\"===this.action?!this.hasCachedSnapshot():!0},r.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},r.prototype.render=function(t){return this.cancelRender(),this.frame=requestAnimationFrame(function(e){return function(){return e.frame=null,t.call(e)}}(this))},r.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},r}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.Controller=function(){function r(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new e.History(this),this.view=new e.View(this),this.scrollManager=new e.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return r.prototype.start=function(){return e.supported&&!this.started?(addEventListener(\"click\",this.clickCaptured,!0),addEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},r.prototype.disable=function(){return this.enabled=!1},r.prototype.stop=function(){return this.started?(removeEventListener(\"click\",this.clickCaptured,!0),removeEventListener(\"DOMContentLoaded\",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},r.prototype.clearCache=function(){return this.cache=new e.SnapshotCache(10)},r.prototype.visit=function(t,r){var n,o;return null==r&&(r={}),t=e.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(n=null!=(o=r.action)?o:\"advance\",this.adapter.visitProposedToLocationWithAction(t,n)):window.location=t:void 0},r.prototype.startVisitToLocationWithAction=function(t,r,n){var o;return e.supported?(o=this.getRestorationDataForIdentifier(n),this.startVisit(t,r,{restorationData:o})):window.location=t},r.prototype.setProgressBarDelay=function(t){return this.progressBarDelay=t},r.prototype.startHistory=function(){return this.location=e.Location.wrap(window.location),this.restorationIdentifier=e.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.stopHistory=function(){return this.history.stop()},r.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},r.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,r){return this.restorationIdentifier=r,this.location=e.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},r.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,r){var n;return this.restorationIdentifier=r,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,\"restore\",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=e.Location.wrap(t)):this.adapter.pageInvalidated()},r.prototype.getCachedSnapshotForLocation=function(t){var e;return null!=(e=this.cache.get(t))?e.clone():void 0},r.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable();\n},r.prototype.cacheSnapshot=function(){var t,r;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),r=this.view.getSnapshot(),t=this.lastRenderedLocation,e.defer(function(e){return function(){return e.cache.put(t,r.clone())}}(this))):void 0},r.prototype.scrollToAnchor=function(t){var e;return(e=this.view.getElementForAnchor(t))?this.scrollToElement(e):this.scrollToPosition({x:0,y:0})},r.prototype.scrollToElement=function(t){return this.scrollManager.scrollToElement(t)},r.prototype.scrollToPosition=function(t){return this.scrollManager.scrollToPosition(t)},r.prototype.scrollPositionChanged=function(t){var e;return e=this.getCurrentRestorationData(),e.scrollPosition=t},r.prototype.render=function(t,e){return this.view.render(t,e)},r.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},r.prototype.viewWillRender=function(t){return this.notifyApplicationBeforeRender(t)},r.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},r.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},r.prototype.clickCaptured=function(){return removeEventListener(\"click\",this.clickBubbled,!1),addEventListener(\"click\",this.clickBubbled,!1)},r.prototype.clickBubbled=function(t){var e,r,n;return this.enabled&&this.clickEventIsSignificant(t)&&(r=this.getVisitableLinkForNode(t.target))&&(n=this.getVisitableLocationForLink(r))&&this.applicationAllowsFollowingLinkToLocation(r,n)?(t.preventDefault(),e=this.getActionForLink(r),this.visit(n,{action:e})):void 0},r.prototype.applicationAllowsFollowingLinkToLocation=function(t,e){var r;return r=this.notifyApplicationAfterClickingLinkToLocation(t,e),!r.defaultPrevented},r.prototype.applicationAllowsVisitingLocation=function(t){var e;return e=this.notifyApplicationBeforeVisitingLocation(t),!e.defaultPrevented},r.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,r){return e.dispatch(\"turbolinks:click\",{target:t,data:{url:r.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationBeforeVisitingLocation=function(t){return e.dispatch(\"turbolinks:before-visit\",{data:{url:t.absoluteURL},cancelable:!0})},r.prototype.notifyApplicationAfterVisitingLocation=function(t){return e.dispatch(\"turbolinks:visit\",{data:{url:t.absoluteURL}})},r.prototype.notifyApplicationBeforeCachingSnapshot=function(){return e.dispatch(\"turbolinks:before-cache\")},r.prototype.notifyApplicationBeforeRender=function(t){return e.dispatch(\"turbolinks:before-render\",{data:{newBody:t}})},r.prototype.notifyApplicationAfterRender=function(){return e.dispatch(\"turbolinks:render\")},r.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),e.dispatch(\"turbolinks:load\",{data:{url:this.location.absoluteURL,timing:t}})},r.prototype.startVisit=function(t,e,r){var n;return null!=(n=this.currentVisit)&&n.cancel(),this.currentVisit=this.createVisit(t,e,r),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(t)},r.prototype.createVisit=function(t,r,n){var o,i,s,a,u;return i=null!=n?n:{},a=i.restorationIdentifier,s=i.restorationData,o=i.historyChanged,u=new e.Visit(this,t,r),u.restorationIdentifier=null!=a?a:e.uuid(),u.restorationData=e.copyObject(s),u.historyChanged=o,u.referrer=this.location,u},r.prototype.visitCompleted=function(t){return this.notifyApplicationAfterPageLoad(t.getTimingMetrics())},r.prototype.clickEventIsSignificant=function(t){return!(t.defaultPrevented||t.target.isContentEditable||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)},r.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?e.closest(t,\"a[href]:not([target]):not([download])\"):void 0},r.prototype.getVisitableLocationForLink=function(t){var r;return r=new e.Location(t.getAttribute(\"href\")),this.locationIsVisitable(r)?r:void 0},r.prototype.getActionForLink=function(t){var e;return null!=(e=t.getAttribute(\"data-turbolinks-action\"))?e:\"advance\"},r.prototype.nodeIsVisitable=function(t){var r;return(r=e.closest(t,\"[data-turbolinks]\"))?\"false\"!==r.getAttribute(\"data-turbolinks\"):!0},r.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&t.isHTML()},r.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},r.prototype.getRestorationDataForIdentifier=function(t){var e;return null!=(e=this.restorationData)[t]?e[t]:e[t]={}},r}()}.call(this),function(){!function(){var t,e;if((t=e=document.currentScript)&&!e.hasAttribute(\"data-turbolinks-suppress-warning\"))for(;t=t.parentNode;)if(t===document.body)return console.warn(\"You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\\n\\nLoad your application\\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\\n\\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\\n\\n\\u2014\\u2014\\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s\",e.outerHTML)}()}.call(this),function(){var t,r,n;e.start=function(){return r()?(null==e.controller&&(e.controller=t()),e.controller.start()):void 0},r=function(){return null==window.Turbolinks&&(window.Turbolinks=e),n()},t=function(){var t;return t=new e.Controller,t.adapter=new e.BrowserAdapter(t),t},n=function(){return window.Turbolinks===e},n()&&e.start()}.call(this)}).call(this),\"object\"==typeof module&&module.exports?module.exports=e:\"function\"==typeof define&&define.amd&&define(e)}).call(this);","/**\n *\n * @param {Date} date\n */\nexports.formatLong = dateStr => {\n    const date = new Date(dateStr);\n    const DD = date\n        .getDate()\n        .toString()\n        .padStart(2, 0);\n    const MM = (date.getMonth() + 1)\n        .toString()\n        .toString()\n        .padStart(2, 0);\n    const YY = date.getFullYear();\n    const HH = date\n        .getHours()\n        .toString()\n        .padStart(2, 0);\n    const mm = date\n        .getMinutes()\n        .toString()\n        .padStart(2, 0);\n    const SS = date\n        .getSeconds()\n        .toString()\n        .padStart(2, 0);\n\n    return `${YY}-${MM}-${DD} ${HH}:${mm}:${SS}`;\n};\n","var EventListener = /** @class */ (function () {\n    function EventListener(eventTarget, eventName) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.unorderedBindings = new Set;\n    }\n    EventListener.prototype.connect = function () {\n        this.eventTarget.addEventListener(this.eventName, this, false);\n    };\n    EventListener.prototype.disconnect = function () {\n        this.eventTarget.removeEventListener(this.eventName, this, false);\n    };\n    // Binding observer delegate\n    /** @hidden */\n    EventListener.prototype.bindingConnected = function (binding) {\n        this.unorderedBindings.add(binding);\n    };\n    /** @hidden */\n    EventListener.prototype.bindingDisconnected = function (binding) {\n        this.unorderedBindings.delete(binding);\n    };\n    EventListener.prototype.handleEvent = function (event) {\n        var extendedEvent = extendEvent(event);\n        for (var _i = 0, _a = this.bindings; _i < _a.length; _i++) {\n            var binding = _a[_i];\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    };\n    Object.defineProperty(EventListener.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.unorderedBindings).sort(function (left, right) {\n                var leftIndex = left.index, rightIndex = right.index;\n                return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EventListener;\n}());\nexport { EventListener };\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        var stopImmediatePropagation_1 = event.stopImmediatePropagation;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation: function () {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation_1.call(this);\n            }\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnRfbGlzdGVuZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXZlbnRfbGlzdGVuZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7SUFLRSx1QkFBWSxXQUF3QixFQUFFLFNBQWlCO1FBQ3JELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1FBQzFCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsK0JBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDaEUsQ0FBQztJQUVELGtDQUFVLEdBQVY7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25FLENBQUM7SUFFRCw0QkFBNEI7SUFFNUIsY0FBYztJQUNkLHdDQUFnQixHQUFoQixVQUFpQixPQUFnQjtRQUMvQixJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3JDLENBQUM7SUFFRCxjQUFjO0lBQ2QsMkNBQW1CLEdBQW5CLFVBQW9CLE9BQWdCO1FBQ2xDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDeEMsQ0FBQztJQUVELG1DQUFXLEdBQVgsVUFBWSxLQUFZO1FBQ3RCLElBQU0sYUFBYSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUN4QyxLQUFzQixVQUFhLEVBQWIsS0FBQSxJQUFJLENBQUMsUUFBUSxFQUFiLGNBQWEsRUFBYixJQUFhLEVBQUU7WUFBaEMsSUFBTSxPQUFPLFNBQUE7WUFDaEIsSUFBSSxhQUFhLENBQUMsMkJBQTJCLEVBQUU7Z0JBQzdDLE1BQUs7YUFDTjtpQkFBTTtnQkFDTCxPQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFBO2FBQ25DO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsc0JBQUksbUNBQVE7YUFBWjtZQUNFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxJQUFJLEVBQUUsS0FBSztnQkFDekQsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQTtnQkFDdEQsT0FBTyxTQUFTLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDckUsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDOzs7T0FBQTtJQUNILG9CQUFDO0FBQUQsQ0FBQyxBQWhERCxJQWdEQzs7QUFFRCxxQkFBcUIsS0FBWTtJQUMvQixJQUFJLDZCQUE2QixJQUFJLEtBQUssRUFBRTtRQUMxQyxPQUFPLEtBQUssQ0FBQTtLQUNiO1NBQU07UUFDRyxJQUFBLDJEQUF3QixDQUFVO1FBQzFDLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7WUFDMUIsMkJBQTJCLEVBQUUsS0FBSztZQUNsQyx3QkFBd0I7Z0JBQ3RCLElBQUksQ0FBQywyQkFBMkIsR0FBRyxJQUFJLENBQUE7Z0JBQ3ZDLDBCQUF3QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNyQyxDQUFDO1NBQ0YsQ0FBQyxDQUFBO0tBQ0g7QUFDSCxDQUFDIn0=","import { EventListener } from \"./event_listener\";\nvar Dispatcher = /** @class */ (function () {\n    function Dispatcher(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map;\n        this.started = false;\n    }\n    Dispatcher.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.connect(); });\n        }\n    };\n    Dispatcher.prototype.stop = function () {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.disconnect(); });\n        }\n    };\n    Object.defineProperty(Dispatcher.prototype, \"eventListeners\", {\n        get: function () {\n            return Array.from(this.eventListenerMaps.values())\n                .reduce(function (listeners, map) { return listeners.concat(Array.from(map.values())); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Binding observer delegate\n    /** @hidden */\n    Dispatcher.prototype.bindingConnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    };\n    /** @hidden */\n    Dispatcher.prototype.bindingDisconnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n    };\n    // Error handling\n    Dispatcher.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    Dispatcher.prototype.fetchEventListenerForBinding = function (binding) {\n        var eventTarget = binding.eventTarget, eventName = binding.eventName;\n        return this.fetchEventListener(eventTarget, eventName);\n    };\n    Dispatcher.prototype.fetchEventListener = function (eventTarget, eventName) {\n        var eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        var eventListener = eventListenerMap.get(eventName);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName);\n            eventListenerMap.set(eventName, eventListener);\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.createEventListener = function (eventTarget, eventName) {\n        var eventListener = new EventListener(eventTarget, eventName);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.fetchEventListenerMapForEventTarget = function (eventTarget) {\n        var eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map;\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    };\n    return Dispatcher;\n}());\nexport { Dispatcher };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzcGF0Y2hlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kaXNwYXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUVoRDtJQUtFLG9CQUFZLFdBQXdCO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtRQUNoQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtJQUN0QixDQUFDO0lBRUQsMEJBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1lBQ25CLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFVBQUEsYUFBYSxJQUFJLE9BQUEsYUFBYSxDQUFDLE9BQU8sRUFBRSxFQUF2QixDQUF1QixDQUFDLENBQUE7U0FDdEU7SUFDSCxDQUFDO0lBRUQseUJBQUksR0FBSjtRQUNFLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtZQUNwQixJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxVQUFBLGFBQWEsSUFBSSxPQUFBLGFBQWEsQ0FBQyxVQUFVLEVBQUUsRUFBMUIsQ0FBMEIsQ0FBQyxDQUFBO1NBQ3pFO0lBQ0gsQ0FBQztJQUVELHNCQUFJLHNDQUFjO2FBQWxCO1lBQ0UsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztpQkFDL0MsTUFBTSxDQUFDLFVBQUMsU0FBUyxFQUFFLEdBQUcsSUFBSyxPQUFBLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUExQyxDQUEwQyxFQUFFLEVBQXFCLENBQUMsQ0FBQTtRQUNsRyxDQUFDOzs7T0FBQTtJQUVELDRCQUE0QjtJQUU1QixjQUFjO0lBQ2QscUNBQWdCLEdBQWhCLFVBQWlCLE9BQWdCO1FBQy9CLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUN0RSxDQUFDO0lBRUQsY0FBYztJQUNkLHdDQUFtQixHQUFuQixVQUFvQixPQUFnQjtRQUNsQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsT0FBTyxDQUFDLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDekUsQ0FBQztJQUVELGlCQUFpQjtJQUVqQixnQ0FBVyxHQUFYLFVBQVksS0FBWSxFQUFFLE9BQWUsRUFBRSxNQUFtQjtRQUFuQix1QkFBQSxFQUFBLFdBQW1CO1FBQzVELElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxXQUFTLE9BQVMsRUFBRSxNQUFNLENBQUMsQ0FBQTtJQUNqRSxDQUFDO0lBRU8saURBQTRCLEdBQXBDLFVBQXFDLE9BQWdCO1FBQzNDLElBQUEsaUNBQVcsRUFBRSw2QkFBUyxDQUFZO1FBQzFDLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQTtJQUN4RCxDQUFDO0lBRU8sdUNBQWtCLEdBQTFCLFVBQTJCLFdBQXdCLEVBQUUsU0FBaUI7UUFDcEUsSUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsbUNBQW1DLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDOUUsSUFBSSxhQUFhLEdBQUcsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ25ELElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDbEIsYUFBYSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUE7WUFDaEUsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUMvQztRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyx3Q0FBbUIsR0FBM0IsVUFBNEIsV0FBd0IsRUFBRSxTQUFpQjtRQUNyRSxJQUFNLGFBQWEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUE7UUFDL0QsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtTQUN4QjtRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyx3REFBbUMsR0FBM0MsVUFBNEMsV0FBd0I7UUFDbEUsSUFBSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzlELElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNyQixnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQTtZQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO1NBQzFEO1FBQ0QsT0FBTyxnQkFBZ0IsQ0FBQTtJQUN6QixDQUFDO0lBQ0gsaUJBQUM7QUFBRCxDQUFDLEFBL0VELElBK0VDIn0=","// capture nos.:            12   23 4               43   1 5   56 7  76\nvar descriptorPattern = /^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;\nexport function parseDescriptorString(descriptorString) {\n    var source = descriptorString.trim();\n    var matches = source.match(descriptorPattern) || [];\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName: matches[2],\n        identifier: matches[5],\n        methodName: matches[7]\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nexport function stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uX2Rlc2NyaXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYWN0aW9uX2Rlc2NyaXB0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0EsdUVBQXVFO0FBQ3ZFLElBQU0saUJBQWlCLEdBQUcsZ0RBQWdELENBQUE7QUFFMUUsTUFBTSxnQ0FBZ0MsZ0JBQXdCO0lBQzVELElBQU0sTUFBTSxHQUFHLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQ3RDLElBQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDckQsT0FBTztRQUNMLFdBQVcsRUFBRSxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsU0FBUyxFQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsVUFBVSxFQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsVUFBVSxFQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDeEIsQ0FBQTtBQUNILENBQUM7QUFFRCwwQkFBMEIsZUFBdUI7SUFDL0MsSUFBSSxlQUFlLElBQUksUUFBUSxFQUFFO1FBQy9CLE9BQU8sTUFBTSxDQUFBO0tBQ2Q7U0FBTSxJQUFJLGVBQWUsSUFBSSxVQUFVLEVBQUU7UUFDeEMsT0FBTyxRQUFRLENBQUE7S0FDaEI7QUFDSCxDQUFDO0FBRUQsTUFBTSwrQkFBK0IsV0FBd0I7SUFDM0QsSUFBSSxXQUFXLElBQUksTUFBTSxFQUFFO1FBQ3pCLE9BQU8sUUFBUSxDQUFBO0tBQ2hCO1NBQU0sSUFBSSxXQUFXLElBQUksUUFBUSxFQUFFO1FBQ2xDLE9BQU8sVUFBVSxDQUFBO0tBQ2xCO0FBQ0gsQ0FBQyJ9","import { parseDescriptorString, stringifyEventTarget } from \"./action_descriptor\";\nvar Action = /** @class */ (function () {\n    function Action(element, index, descriptor) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n    }\n    Action.forToken = function (token) {\n        return new this(token.element, token.index, parseDescriptorString(token.content));\n    };\n    Action.prototype.toString = function () {\n        var eventNameSuffix = this.eventTargetName ? \"@\" + this.eventTargetName : \"\";\n        return \"\" + this.eventName + eventNameSuffix + \"->\" + this.identifier + \"#\" + this.methodName;\n    };\n    Object.defineProperty(Action.prototype, \"eventTargetName\", {\n        get: function () {\n            return stringifyEventTarget(this.eventTarget);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Action;\n}());\nexport { Action };\nvar defaultEventNames = {\n    \"a\": function (e) { return \"click\"; },\n    \"button\": function (e) { return \"click\"; },\n    \"form\": function (e) { return \"submit\"; },\n    \"input\": function (e) { return e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"change\"; },\n    \"select\": function (e) { return \"change\"; },\n    \"textarea\": function (e) { return \"change\"; }\n};\nexport function getDefaultEventNameForElement(element) {\n    var tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2FjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9CLHFCQUFxQixFQUFFLG9CQUFvQixFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFHbkc7SUFZRSxnQkFBWSxPQUFnQixFQUFFLEtBQWEsRUFBRSxVQUFxQztRQUNoRixJQUFJLENBQUMsT0FBTyxHQUFPLE9BQU8sQ0FBQTtRQUMxQixJQUFJLENBQUMsS0FBSyxHQUFTLEtBQUssQ0FBQTtRQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQyxXQUFXLElBQUksT0FBTyxDQUFBO1FBQ3BELElBQUksQ0FBQyxTQUFTLEdBQUssVUFBVSxDQUFDLFNBQVMsSUFBSSw2QkFBNkIsQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtRQUNoSCxJQUFJLENBQUMsVUFBVSxHQUFJLFVBQVUsQ0FBQyxVQUFVLElBQUksS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUE7UUFDdkUsSUFBSSxDQUFDLFVBQVUsR0FBSSxVQUFVLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQzFFLENBQUM7SUFYTSxlQUFRLEdBQWYsVUFBZ0IsS0FBWTtRQUMxQixPQUFPLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtJQUNuRixDQUFDO0lBV0QseUJBQVEsR0FBUjtRQUNFLElBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLE1BQUksSUFBSSxDQUFDLGVBQWlCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtRQUM5RSxPQUFPLEtBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxlQUFlLFVBQUssSUFBSSxDQUFDLFVBQVUsU0FBSSxJQUFJLENBQUMsVUFBWSxDQUFBO0lBQ3JGLENBQUM7SUFFRCxzQkFBWSxtQ0FBZTthQUEzQjtZQUNFLE9BQU8sb0JBQW9CLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQy9DLENBQUM7OztPQUFBO0lBQ0gsYUFBQztBQUFELENBQUMsQUE3QkQsSUE2QkM7O0FBRUQsSUFBTSxpQkFBaUIsR0FBd0Q7SUFDN0UsR0FBRyxFQUFTLFVBQUEsQ0FBQyxJQUFJLE9BQUEsT0FBTyxFQUFQLENBQU87SUFDeEIsUUFBUSxFQUFJLFVBQUEsQ0FBQyxJQUFJLE9BQUEsT0FBTyxFQUFQLENBQU87SUFDeEIsTUFBTSxFQUFNLFVBQUEsQ0FBQyxJQUFJLE9BQUEsUUFBUSxFQUFSLENBQVE7SUFDekIsT0FBTyxFQUFLLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUF2RCxDQUF1RDtJQUN4RSxRQUFRLEVBQUksVUFBQSxDQUFDLElBQUksT0FBQSxRQUFRLEVBQVIsQ0FBUTtJQUN6QixVQUFVLEVBQUUsVUFBQSxDQUFDLElBQUksT0FBQSxRQUFRLEVBQVIsQ0FBUTtDQUMxQixDQUFBO0FBRUQsTUFBTSx3Q0FBd0MsT0FBZ0I7SUFDNUQsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQTtJQUM3QyxJQUFJLE9BQU8sSUFBSSxpQkFBaUIsRUFBRTtRQUNoQyxPQUFPLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0tBQzNDO0FBQ0gsQ0FBQztBQUVELGVBQWUsT0FBZTtJQUM1QixNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBQzFCLENBQUMifQ==","var Binding = /** @class */ (function () {\n    function Binding(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    Object.defineProperty(Binding.prototype, \"index\", {\n        get: function () {\n            return this.action.index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"eventTarget\", {\n        get: function () {\n            return this.action.eventTarget;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Binding.prototype.handleEvent = function (event) {\n        if (this.willBeInvokedByEvent(event)) {\n            this.invokeWithEvent(event);\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"eventName\", {\n        get: function () {\n            return this.action.eventName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"method\", {\n        get: function () {\n            var method = this.controller[this.methodName];\n            if (typeof method == \"function\") {\n                return method;\n            }\n            throw new Error(\"Action \\\"\" + this.action + \"\\\" references undefined method \\\"\" + this.methodName + \"\\\"\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Binding.prototype.invokeWithEvent = function (event) {\n        try {\n            this.method.call(this.controller, event);\n        }\n        catch (error) {\n            var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element, index = _a.index;\n            var detail = { identifier: identifier, controller: controller, element: element, index: index, event: event };\n            this.context.handleError(error, \"invoking action \\\"\" + this.action + \"\\\"\", detail);\n        }\n    };\n    Binding.prototype.willBeInvokedByEvent = function (event) {\n        var eventTarget = event.target;\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return true;\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"controller\", {\n        get: function () {\n            return this.context.controller;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"methodName\", {\n        get: function () {\n            return this.action.methodName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Binding;\n}());\nexport { Binding };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluZGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaW5kaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBO0lBSUUsaUJBQVksT0FBZ0IsRUFBRSxNQUFjO1FBQzFDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO0lBQ3RCLENBQUM7SUFFRCxzQkFBSSwwQkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQTtRQUMxQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLGdDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUE7UUFDaEMsQ0FBQzs7O09BQUE7SUFFRCw2QkFBVyxHQUFYLFVBQVksS0FBWTtRQUN0QixJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNwQyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFBO1NBQzVCO0lBQ0gsQ0FBQztJQUVELHNCQUFJLDhCQUFTO2FBQWI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFBO1FBQzlCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkJBQU07YUFBVjtZQUNFLElBQU0sTUFBTSxHQUFJLElBQUksQ0FBQyxVQUFrQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUN4RCxJQUFJLE9BQU8sTUFBTSxJQUFJLFVBQVUsRUFBRTtnQkFDL0IsT0FBTyxNQUFNLENBQUE7YUFDZDtZQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsY0FBVyxJQUFJLENBQUMsTUFBTSx5Q0FBa0MsSUFBSSxDQUFDLFVBQVUsT0FBRyxDQUFDLENBQUE7UUFDN0YsQ0FBQzs7O09BQUE7SUFFTyxpQ0FBZSxHQUF2QixVQUF3QixLQUFZO1FBQ2xDLElBQUk7WUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQ3pDO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDUixJQUFBLFNBQWlELEVBQS9DLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSxvQkFBTyxFQUFFLGdCQUFLLENBQVM7WUFDdkQsSUFBTSxNQUFNLEdBQUcsRUFBRSxVQUFVLFlBQUEsRUFBRSxVQUFVLFlBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFBO1lBQ2hFLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx1QkFBb0IsSUFBSSxDQUFDLE1BQU0sT0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO1NBQzVFO0lBQ0gsQ0FBQztJQUVPLHNDQUFvQixHQUE1QixVQUE2QixLQUFZO1FBQ3ZDLElBQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUE7UUFDaEMsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLFdBQVcsRUFBRTtZQUNoQyxPQUFPLElBQUksQ0FBQTtTQUNaO2FBQU0sSUFBSSxXQUFXLFlBQVksT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQy9FLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUE7U0FDL0M7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFBO1NBQ1o7SUFDSCxDQUFDO0lBRUQsc0JBQVksK0JBQVU7YUFBdEI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQVksK0JBQVU7YUFBdEI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFBO1FBQy9CLENBQUM7OztPQUFBO0lBRUQsc0JBQVksNEJBQU87YUFBbkI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQVksMEJBQUs7YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBQ0gsY0FBQztBQUFELENBQUMsQUEzRUQsSUEyRUMifQ==","var ElementObserver = /** @class */ (function () {\n    function ElementObserver(element, delegate) {\n        var _this = this;\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set;\n        this.mutationObserver = new MutationObserver(function (mutations) { return _this.processMutations(mutations); });\n    }\n    ElementObserver.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, childList: true, subtree: true });\n            this.refresh();\n        }\n    };\n    ElementObserver.prototype.stop = function () {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    };\n    ElementObserver.prototype.refresh = function () {\n        if (this.started) {\n            var matches = new Set(this.matchElementsInTree());\n            for (var _i = 0, _a = Array.from(this.elements); _i < _a.length; _i++) {\n                var element = _a[_i];\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (var _b = 0, _c = Array.from(matches); _b < _c.length; _b++) {\n                var element = _c[_b];\n                this.addElement(element);\n            }\n        }\n    };\n    // Mutation record processing\n    ElementObserver.prototype.processMutations = function (mutations) {\n        if (this.started) {\n            for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n                var mutation = mutations_1[_i];\n                this.processMutation(mutation);\n            }\n        }\n    };\n    ElementObserver.prototype.processMutation = function (mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    };\n    ElementObserver.prototype.processAttributeChange = function (node, attributeName) {\n        var element = node;\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    };\n    ElementObserver.prototype.processRemovedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    };\n    ElementObserver.prototype.processAddedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    };\n    // Element matching\n    ElementObserver.prototype.matchElement = function (element) {\n        return this.delegate.matchElement(element);\n    };\n    ElementObserver.prototype.matchElementsInTree = function (tree) {\n        if (tree === void 0) { tree = this.element; }\n        return this.delegate.matchElementsInTree(tree);\n    };\n    ElementObserver.prototype.processTree = function (tree, processor) {\n        for (var _i = 0, _a = this.matchElementsInTree(tree); _i < _a.length; _i++) {\n            var element = _a[_i];\n            processor.call(this, element);\n        }\n    };\n    ElementObserver.prototype.elementFromNode = function (node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    };\n    ElementObserver.prototype.elementIsActive = function (element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    };\n    // Element tracking\n    ElementObserver.prototype.addElement = function (element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    };\n    ElementObserver.prototype.removeElement = function (element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    };\n    return ElementObserver;\n}());\nexport { ElementObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxlbWVudF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lbGVtZW50X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVNBO0lBUUUseUJBQVksT0FBZ0IsRUFBRSxRQUFpQztRQUEvRCxpQkFPQztRQU5DLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFBO1FBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBRXhCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUE7UUFDdkIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksZ0JBQWdCLENBQUMsVUFBQyxTQUFTLElBQUssT0FBQSxLQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEVBQWhDLENBQWdDLENBQUMsQ0FBQTtJQUMvRixDQUFDO0lBRUQsK0JBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1lBQ25CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtZQUNqRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUE7U0FDZjtJQUNILENBQUM7SUFFRCw4QkFBSSxHQUFKO1FBQ0UsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUNuQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLENBQUE7WUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7U0FDckI7SUFDSCxDQUFDO0lBRUQsaUNBQU8sR0FBUDtRQUNFLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixJQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxDQUFBO1lBRW5ELEtBQXNCLFVBQXlCLEVBQXpCLEtBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQXpCLGNBQXlCLEVBQXpCLElBQXlCLEVBQUU7Z0JBQTVDLElBQU0sT0FBTyxTQUFBO2dCQUNoQixJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRTtvQkFDekIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQTtpQkFDNUI7YUFDRjtZQUVELEtBQXNCLFVBQW1CLEVBQW5CLEtBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBbkIsY0FBbUIsRUFBbkIsSUFBbUIsRUFBRTtnQkFBdEMsSUFBTSxPQUFPLFNBQUE7Z0JBQ2hCLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUE7YUFDekI7U0FDRjtJQUNILENBQUM7SUFFRCw2QkFBNkI7SUFFckIsMENBQWdCLEdBQXhCLFVBQXlCLFNBQTJCO1FBQ2xELElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixLQUF1QixVQUFTLEVBQVQsdUJBQVMsRUFBVCx1QkFBUyxFQUFULElBQVMsRUFBRTtnQkFBN0IsSUFBTSxRQUFRLGtCQUFBO2dCQUNqQixJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO2FBQy9CO1NBQ0Y7SUFDSCxDQUFDO0lBRU8seUNBQWUsR0FBdkIsVUFBd0IsUUFBd0I7UUFDOUMsSUFBSSxRQUFRLENBQUMsSUFBSSxJQUFJLFlBQVksRUFBRTtZQUNqQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsYUFBYyxDQUFDLENBQUE7U0FDdEU7YUFBTSxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksV0FBVyxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUE7WUFDL0MsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQTtTQUM1QztJQUNILENBQUM7SUFFTyxnREFBc0IsR0FBOUIsVUFBK0IsSUFBVSxFQUFFLGFBQXFCO1FBQzlELElBQU0sT0FBTyxHQUFHLElBQWUsQ0FBQTtRQUMvQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQzlCLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUN2RSxJQUFJLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQTthQUM5RDtpQkFBTTtnQkFDTCxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFBO2FBQzVCO1NBQ0Y7YUFBTSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDckMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQTtTQUN6QjtJQUNILENBQUM7SUFFTyw2Q0FBbUIsR0FBM0IsVUFBNEIsS0FBZTtRQUN6QyxLQUFtQixVQUFpQixFQUFqQixLQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQWpCLGNBQWlCLEVBQWpCLElBQWlCLEVBQUU7WUFBakMsSUFBTSxJQUFJLFNBQUE7WUFDYixJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQzFDLElBQUksT0FBTyxFQUFFO2dCQUNYLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQTthQUM5QztTQUNGO0lBQ0gsQ0FBQztJQUVPLDJDQUFpQixHQUF6QixVQUEwQixLQUFlO1FBQ3ZDLEtBQW1CLFVBQWlCLEVBQWpCLEtBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBakIsY0FBaUIsRUFBakIsSUFBaUIsRUFBRTtZQUFqQyxJQUFNLElBQUksU0FBQTtZQUNiLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDMUMsSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFDNUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFBO2FBQzNDO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsbUJBQW1CO0lBRVgsc0NBQVksR0FBcEIsVUFBcUIsT0FBZ0I7UUFDbkMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUM1QyxDQUFDO0lBRU8sNkNBQW1CLEdBQTNCLFVBQTRCLElBQTRCO1FBQTVCLHFCQUFBLEVBQUEsT0FBZ0IsSUFBSSxDQUFDLE9BQU87UUFDdEQsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFBO0lBQ2hELENBQUM7SUFFTyxxQ0FBVyxHQUFuQixVQUFvQixJQUFhLEVBQUUsU0FBcUM7UUFDdEUsS0FBc0IsVUFBOEIsRUFBOUIsS0FBQSxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLEVBQTlCLGNBQThCLEVBQTlCLElBQThCLEVBQUU7WUFBakQsSUFBTSxPQUFPLFNBQUE7WUFDaEIsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUE7U0FDOUI7SUFDSCxDQUFDO0lBRU8seUNBQWUsR0FBdkIsVUFBd0IsSUFBVTtRQUNoQyxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUN0QyxPQUFPLElBQWUsQ0FBQTtTQUN2QjtJQUNILENBQUM7SUFFTyx5Q0FBZSxHQUF2QixVQUF3QixPQUFnQjtRQUN0QyxJQUFJLE9BQU8sQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUU7WUFDbkQsT0FBTyxLQUFLLENBQUE7U0FDYjthQUFNO1lBQ0wsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQTtTQUN0QztJQUNILENBQUM7SUFFRCxtQkFBbUI7SUFFWCxvQ0FBVSxHQUFsQixVQUFtQixPQUFnQjtRQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDL0IsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNqQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtnQkFDMUIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRTtvQkFDaEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUE7aUJBQ3RDO2FBQ0Y7U0FDRjtJQUNILENBQUM7SUFFTyx1Q0FBYSxHQUFyQixVQUFzQixPQUFnQjtRQUNwQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQzdCLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDbEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTthQUN4QztTQUNGO0lBQ0gsQ0FBQztJQUNILHNCQUFDO0FBQUQsQ0FBQyxBQXRKRCxJQXNKQyJ9","import { ElementObserver } from \"./element_observer\";\nvar AttributeObserver = /** @class */ (function () {\n    function AttributeObserver(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    Object.defineProperty(AttributeObserver.prototype, \"element\", {\n        get: function () {\n            return this.elementObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttributeObserver.prototype, \"selector\", {\n        get: function () {\n            return \"[\" + this.attributeName + \"]\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AttributeObserver.prototype.start = function () {\n        this.elementObserver.start();\n    };\n    AttributeObserver.prototype.stop = function () {\n        this.elementObserver.stop();\n    };\n    AttributeObserver.prototype.refresh = function () {\n        this.elementObserver.refresh();\n    };\n    Object.defineProperty(AttributeObserver.prototype, \"started\", {\n        get: function () {\n            return this.elementObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Element observer delegate\n    AttributeObserver.prototype.matchElement = function (element) {\n        return element.hasAttribute(this.attributeName);\n    };\n    AttributeObserver.prototype.matchElementsInTree = function (tree) {\n        var match = this.matchElement(tree) ? [tree] : [];\n        var matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    };\n    AttributeObserver.prototype.elementMatched = function (element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementUnmatched = function (element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementAttributeChanged = function (element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    };\n    return AttributeObserver;\n}());\nexport { AttributeObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0cmlidXRlX29ic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2F0dHJpYnV0ZV9vYnNlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUEyQixNQUFNLG9CQUFvQixDQUFBO0FBUTdFO0lBTUUsMkJBQVksT0FBZ0IsRUFBRSxhQUFxQixFQUFFLFFBQW1DO1FBQ3RGLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBRXhCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxlQUFlLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQTtRQUNyQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHVDQUFRO2FBQVo7WUFDRSxPQUFPLE1BQUksSUFBSSxDQUFDLGFBQWEsTUFBRyxDQUFBO1FBQ2xDLENBQUM7OztPQUFBO0lBRUQsaUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDOUIsQ0FBQztJQUVELGdDQUFJLEdBQUo7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFBO0lBQzdCLENBQUM7SUFFRCxtQ0FBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQyxDQUFDO0lBRUQsc0JBQUksc0NBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUE7UUFDckMsQ0FBQzs7O09BQUE7SUFFRCw0QkFBNEI7SUFFNUIsd0NBQVksR0FBWixVQUFhLE9BQWdCO1FBQzNCLE9BQU8sT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDakQsQ0FBQztJQUVELCtDQUFtQixHQUFuQixVQUFvQixJQUFhO1FBQy9CLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtRQUNuRCxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQTtRQUNoRSxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDOUIsQ0FBQztJQUVELDBDQUFjLEdBQWQsVUFBZSxPQUFnQjtRQUM3QixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLEVBQUU7WUFDekMsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQ25FO0lBQ0gsQ0FBQztJQUVELDRDQUFnQixHQUFoQixVQUFpQixPQUFnQjtRQUMvQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMseUJBQXlCLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1NBQ3JFO0lBQ0gsQ0FBQztJQUVELG1EQUF1QixHQUF2QixVQUF3QixPQUFnQixFQUFFLGFBQXFCO1FBQzdELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyw0QkFBNEIsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLGFBQWEsRUFBRTtZQUNyRixJQUFJLENBQUMsUUFBUSxDQUFDLDRCQUE0QixDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUNuRTtJQUNILENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFsRUQsSUFrRUMifQ==","export function add(map, key, value) {\n    fetch(map, key).add(value);\n}\nexport function del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nexport function fetch(map, key) {\n    var values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nexport function prune(map, key) {\n    var values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0X29wZXJhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2V0X29wZXJhdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxjQUFvQixHQUFtQixFQUFFLEdBQU0sRUFBRSxLQUFRO0lBQzdELEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzVCLENBQUM7QUFFRCxNQUFNLGNBQW9CLEdBQW1CLEVBQUUsR0FBTSxFQUFFLEtBQVE7SUFDN0QsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDN0IsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUNqQixDQUFDO0FBRUQsTUFBTSxnQkFBc0IsR0FBbUIsRUFBRSxHQUFNO0lBQ3JELElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDekIsSUFBSSxDQUFDLE1BQU0sRUFBRTtRQUNYLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQ2xCLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0tBQ3JCO0lBQ0QsT0FBTyxNQUFNLENBQUE7QUFDZixDQUFDO0FBRUQsTUFBTSxnQkFBc0IsR0FBbUIsRUFBRSxHQUFNO0lBQ3JELElBQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDM0IsSUFBSSxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFO1FBQ3RDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7S0FDaEI7QUFDSCxDQUFDIn0=","import { add, del } from \"./set_operations\";\nvar Multimap = /** @class */ (function () {\n    function Multimap() {\n        this.valuesByKey = new Map();\n    }\n    Object.defineProperty(Multimap.prototype, \"values\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (values, set) { return values.concat(Array.from(set)); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Multimap.prototype, \"size\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (size, set) { return size + set.size; }, 0);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Multimap.prototype.add = function (key, value) {\n        add(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.delete = function (key, value) {\n        del(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.has = function (key, value) {\n        var values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    };\n    Multimap.prototype.hasKey = function (key) {\n        return this.valuesByKey.has(key);\n    };\n    Multimap.prototype.hasValue = function (value) {\n        var sets = Array.from(this.valuesByKey.values());\n        return sets.some(function (set) { return set.has(value); });\n    };\n    Multimap.prototype.getValuesForKey = function (key) {\n        var values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    };\n    Multimap.prototype.getKeysForValue = function (value) {\n        return Array.from(this.valuesByKey)\n            .filter(function (_a) {\n            var key = _a[0], values = _a[1];\n            return values.has(value);\n        })\n            .map(function (_a) {\n            var key = _a[0], values = _a[1];\n            return key;\n        });\n    };\n    return Multimap;\n}());\nexport { Multimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGltYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbXVsdGltYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUUzQztJQUdFO1FBQ0UsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEdBQUcsRUFBYSxDQUFBO0lBQ3pDLENBQUM7SUFFRCxzQkFBSSw0QkFBTTthQUFWO1lBQ0UsSUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7WUFDbEQsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSyxPQUFBLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUE5QixDQUE4QixFQUFRLEVBQUUsQ0FBQyxDQUFBO1FBQy9FLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMEJBQUk7YUFBUjtZQUNFLElBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1lBQ2xELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFDLElBQUksRUFBRSxHQUFHLElBQUssT0FBQSxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBZixDQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDdkQsQ0FBQzs7O09BQUE7SUFFRCxzQkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFRCx5QkFBTSxHQUFOLFVBQU8sR0FBTSxFQUFFLEtBQVE7UUFDckIsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFRCxzQkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEMsT0FBTyxNQUFNLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDNUMsQ0FBQztJQUVELHlCQUFNLEdBQU4sVUFBTyxHQUFNO1FBQ1gsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsMkJBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixJQUFNLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUNsRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBQSxHQUFHLElBQUksT0FBQSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFkLENBQWMsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFRCxrQ0FBZSxHQUFmLFVBQWdCLEdBQU07UUFDcEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDeEMsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUN6QyxDQUFDO0lBRUQsa0NBQWUsR0FBZixVQUFnQixLQUFRO1FBQ3RCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ2hDLE1BQU0sQ0FBQyxVQUFDLEVBQWE7Z0JBQVosV0FBRyxFQUFFLGNBQU07WUFBTSxPQUFBLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO1FBQWpCLENBQWlCLENBQUM7YUFDNUMsR0FBRyxDQUFDLFVBQUMsRUFBYTtnQkFBWixXQUFHLEVBQUUsY0FBTTtZQUFNLE9BQUEsR0FBRztRQUFILENBQUcsQ0FBQyxDQUFBO0lBQ2hDLENBQUM7SUFDSCxlQUFDO0FBQUQsQ0FBQyxBQWpERCxJQWlEQyJ9","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Multimap } from \"./multimap\";\nimport { add, del } from \"./set_operations\";\nvar IndexedMultimap = /** @class */ (function (_super) {\n    __extends(IndexedMultimap, _super);\n    function IndexedMultimap() {\n        var _this = _super.call(this) || this;\n        _this.keysByValue = new Map;\n        return _this;\n    }\n    Object.defineProperty(IndexedMultimap.prototype, \"values\", {\n        get: function () {\n            return Array.from(this.keysByValue.keys());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    IndexedMultimap.prototype.add = function (key, value) {\n        _super.prototype.add.call(this, key, value);\n        add(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.delete = function (key, value) {\n        _super.prototype.delete.call(this, key, value);\n        del(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.hasValue = function (value) {\n        return this.keysByValue.has(value);\n    };\n    IndexedMultimap.prototype.getKeysForValue = function (value) {\n        var set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    };\n    return IndexedMultimap;\n}(Multimap));\nexport { IndexedMultimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXhlZF9tdWx0aW1hcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleGVkX211bHRpbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBQ3JDLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFFM0M7SUFBMkMsbUNBQWM7SUFHdkQ7UUFBQSxZQUNFLGlCQUFPLFNBRVI7UUFEQyxLQUFJLENBQUMsV0FBVyxHQUFHLElBQUksR0FBRyxDQUFBOztJQUM1QixDQUFDO0lBRUQsc0JBQUksbUNBQU07YUFBVjtZQUNFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7UUFDNUMsQ0FBQzs7O09BQUE7SUFFRCw2QkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsaUJBQU0sR0FBRyxZQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUNyQixHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELGdDQUFNLEdBQU4sVUFBTyxHQUFNLEVBQUUsS0FBUTtRQUNyQixpQkFBTSxNQUFNLFlBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRUQsa0NBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQ3BDLENBQUM7SUFFRCx5Q0FBZSxHQUFmLFVBQWdCLEtBQVE7UUFDdEIsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDdkMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtJQUNuQyxDQUFDO0lBQ0gsc0JBQUM7QUFBRCxDQUFDLEFBOUJELENBQTJDLFFBQVEsR0E4QmxEIn0=","import { AttributeObserver } from \"./attribute_observer\";\nimport { Multimap } from \"@stimulus/multimap\";\nvar TokenListObserver = /** @class */ (function () {\n    function TokenListObserver(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap;\n    }\n    Object.defineProperty(TokenListObserver.prototype, \"started\", {\n        get: function () {\n            return this.attributeObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TokenListObserver.prototype.start = function () {\n        this.attributeObserver.start();\n    };\n    TokenListObserver.prototype.stop = function () {\n        this.attributeObserver.stop();\n    };\n    TokenListObserver.prototype.refresh = function () {\n        this.attributeObserver.refresh();\n    };\n    Object.defineProperty(TokenListObserver.prototype, \"element\", {\n        get: function () {\n            return this.attributeObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TokenListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.attributeObserver.attributeName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Attribute observer delegate\n    TokenListObserver.prototype.elementMatchedAttribute = function (element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    };\n    TokenListObserver.prototype.elementAttributeValueChanged = function (element) {\n        var _a = this.refreshTokensForElement(element), unmatchedTokens = _a[0], matchedTokens = _a[1];\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    };\n    TokenListObserver.prototype.elementUnmatchedAttribute = function (element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    };\n    TokenListObserver.prototype.tokensMatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenMatched(token); });\n    };\n    TokenListObserver.prototype.tokensUnmatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenUnmatched(token); });\n    };\n    TokenListObserver.prototype.tokenMatched = function (token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    };\n    TokenListObserver.prototype.tokenUnmatched = function (token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    };\n    TokenListObserver.prototype.refreshTokensForElement = function (element) {\n        var previousTokens = this.tokensByElement.getValuesForKey(element);\n        var currentTokens = this.readTokensForElement(element);\n        var firstDifferingIndex = zip(previousTokens, currentTokens)\n            .findIndex(function (_a) {\n            var previousToken = _a[0], currentToken = _a[1];\n            return !tokensAreEqual(previousToken, currentToken);\n        });\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    };\n    TokenListObserver.prototype.readTokensForElement = function (element) {\n        var attributeName = this.attributeName;\n        var tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    };\n    return TokenListObserver;\n}());\nexport { TokenListObserver };\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString.trim().split(/\\s+/).filter(function (content) { return content.length; })\n        .map(function (content, index) { return ({ element: element, attributeName: attributeName, content: content, index: index }); });\n}\nfunction zip(left, right) {\n    var length = Math.max(left.length, right.length);\n    return Array.from({ length: length }, function (_, index) { return [left[index], right[index]]; });\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5fbGlzdF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90b2tlbl9saXN0X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBNkIsTUFBTSxzQkFBc0IsQ0FBQTtBQUNuRixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUE7QUFjN0M7SUFLRSwyQkFBWSxPQUFnQixFQUFFLGFBQXFCLEVBQUUsUUFBbUM7UUFDdEYsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM1RSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksUUFBUSxDQUFBO0lBQ3JDLENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFBO1FBQ3ZDLENBQUM7OztPQUFBO0lBRUQsaUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUNoQyxDQUFDO0lBRUQsZ0NBQUksR0FBSjtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUMvQixDQUFDO0lBRUQsbUNBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsc0JBQUksc0NBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQTtRQUN2QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRDQUFhO2FBQWpCO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFBO1FBQzdDLENBQUM7OztPQUFBO0lBRUQsOEJBQThCO0lB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","import { TokenListObserver } from \"./token_list_observer\";\nvar ValueListObserver = /** @class */ (function () {\n    function ValueListObserver(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap;\n        this.valuesByTokenByElement = new WeakMap;\n    }\n    Object.defineProperty(ValueListObserver.prototype, \"started\", {\n        get: function () {\n            return this.tokenListObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ValueListObserver.prototype.start = function () {\n        this.tokenListObserver.start();\n    };\n    ValueListObserver.prototype.stop = function () {\n        this.tokenListObserver.stop();\n    };\n    ValueListObserver.prototype.refresh = function () {\n        this.tokenListObserver.refresh();\n    };\n    Object.defineProperty(ValueListObserver.prototype, \"element\", {\n        get: function () {\n            return this.tokenListObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ValueListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.tokenListObserver.attributeName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ValueListObserver.prototype.tokenMatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.tokenUnmatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.fetchParseResultForToken = function (token) {\n        var parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    };\n    ValueListObserver.prototype.fetchValuesByTokenForElement = function (element) {\n        var valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map;\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    };\n    ValueListObserver.prototype.parseToken = function (token) {\n        try {\n            var value = this.delegate.parseValueForToken(token);\n            return { value: value };\n        }\n        catch (error) {\n            return { error: error };\n        }\n    };\n    return ValueListObserver;\n}());\nexport { ValueListObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsdWVfbGlzdF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWx1ZV9saXN0X29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBUyxpQkFBaUIsRUFBNkIsTUFBTSx1QkFBdUIsQ0FBQTtBQWEzRjtJQU1FLDJCQUFZLE9BQWdCLEVBQUUsYUFBcUIsRUFBRSxRQUFzQztRQUN6RixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQzVFLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLE9BQU8sQ0FBQTtRQUN0QyxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxPQUFPLENBQUE7SUFDM0MsQ0FBQztJQUVELHNCQUFJLHNDQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUE7UUFDdkMsQ0FBQzs7O09BQUE7SUFFRCxpQ0FBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2hDLENBQUM7SUFFRCxnQ0FBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9CLENBQUM7SUFFRCxtQ0FBTyxHQUFQO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxDQUFBO0lBQ2xDLENBQUM7SUFFRCxzQkFBSSxzQ0FBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFBO1FBQ3ZDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNENBQWE7YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLENBQUE7UUFDN0MsQ0FBQzs7O09BQUE7SUFFRCx3Q0FBWSxHQUFaLFVBQWEsS0FBWTtRQUNmLElBQUEsdUJBQU8sQ0FBVTtRQUNqQixJQUFBLGtEQUFLLENBQXlDO1FBQ3RELElBQUksS0FBSyxFQUFFO1lBQ1QsSUFBSSxDQUFDLDRCQUE0QixDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7WUFDNUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUE7U0FDbEQ7SUFDSCxDQUFDO0lBRUQsMENBQWMsR0FBZCxVQUFlLEtBQVk7UUFDakIsSUFBQSx1QkFBTyxDQUFVO1FBQ2pCLElBQUEsa0RBQUssQ0FBeUM7UUFDdEQsSUFBSSxLQUFLLEVBQUU7WUFDVCxJQUFJLENBQUMsNEJBQTRCLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3hELElBQUksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQ3BEO0lBQ0gsQ0FBQztJQUVPLG9EQUF3QixHQUFoQyxVQUFpQyxLQUFZO1FBQzNDLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckQsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNoQixXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUNwQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQTtTQUNqRDtRQUNELE9BQU8sV0FBVyxDQUFBO0lBQ3BCLENBQUM7SUFFTyx3REFBNEIsR0FBcEMsVUFBcUMsT0FBZ0I7UUFDbkQsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUM1RCxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ2xCLGFBQWEsR0FBRyxJQUFJLEdBQUcsQ0FBQTtZQUN2QixJQUFJLENBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQTtTQUN4RDtRQUNELE9BQU8sYUFBYSxDQUFBO0lBQ3RCLENBQUM7SUFFTyxzQ0FBVSxHQUFsQixVQUFtQixLQUFZO1FBQzdCLElBQUk7WUFDRixJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3JELE9BQU8sRUFBRSxLQUFLLE9BQUEsRUFBRSxDQUFBO1NBQ2pCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxPQUFPLEVBQUUsS0FBSyxPQUFBLEVBQUUsQ0FBQTtTQUNqQjtJQUNILENBQUM7SUFDSCx3QkFBQztBQUFELENBQUMsQUFqRkQsSUFpRkMifQ==","import { Action } from \"./action\";\nimport { Binding } from \"./binding\";\nimport { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar BindingObserver = /** @class */ (function () {\n    function BindingObserver(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map;\n    }\n    BindingObserver.prototype.start = function () {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    };\n    BindingObserver.prototype.stop = function () {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    };\n    Object.defineProperty(BindingObserver.prototype, \"element\", {\n        get: function () {\n            return this.context.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"actionAttribute\", {\n        get: function () {\n            return this.schema.actionAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"schema\", {\n        get: function () {\n            return this.context.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.bindingsByAction.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BindingObserver.prototype.connectAction = function (action) {\n        var binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    };\n    BindingObserver.prototype.disconnectAction = function (action) {\n        var binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    };\n    BindingObserver.prototype.disconnectAllActions = function () {\n        var _this = this;\n        this.bindings.forEach(function (binding) { return _this.delegate.bindingDisconnected(binding); });\n        this.bindingsByAction.clear();\n    };\n    // Value observer delegate\n    BindingObserver.prototype.parseValueForToken = function (token) {\n        var action = Action.forToken(token);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    };\n    BindingObserver.prototype.elementMatchedValue = function (element, action) {\n        this.connectAction(action);\n    };\n    BindingObserver.prototype.elementUnmatchedValue = function (element, action) {\n        this.disconnectAction(action);\n    };\n    return BindingObserver;\n}());\nexport { BindingObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluZGluZ19vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaW5kaW5nX29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQTtBQUluQyxPQUFPLEVBQVMsaUJBQWlCLEVBQTZCLE1BQU0sOEJBQThCLENBQUE7QUFPbEc7SUFNRSx5QkFBWSxPQUFnQixFQUFFLFFBQWlDO1FBQzdELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNqQyxDQUFDO0lBRUQsK0JBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDM0IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxDQUFBO1lBQ3hGLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtTQUMvQjtJQUNILENBQUM7SUFFRCw4QkFBSSxHQUFKO1FBQ0UsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO1lBQzdCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFBO1lBQzdCLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFBO1NBQzVCO0lBQ0gsQ0FBQztJQUVELHNCQUFJLG9DQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFBO1FBQzdCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksdUNBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUE7UUFDaEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0Q0FBZTthQUFuQjtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUE7UUFDcEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxtQ0FBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQTtRQUM1QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHFDQUFRO2FBQVo7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7UUFDbkQsQ0FBQzs7O09BQUE7SUFFTyx1Q0FBYSxHQUFyQixVQUFzQixNQUFjO1FBQ2xDLElBQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDakQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUN6QyxDQUFDO0lBRU8sMENBQWdCLEdBQXhCLFVBQXlCLE1BQWM7UUFDckMsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNqRCxJQUFJLE9BQU8sRUFBRTtZQUNYLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQTtTQUMzQztJQUNILENBQUM7SUFFTyw4Q0FBb0IsR0FBNUI7UUFBQSxpQkFHQztRQUZDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQUEsT0FBTyxJQUFJLE9BQUEsS0FBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsRUFBMUMsQ0FBMEMsQ0FBQyxDQUFBO1FBQzVFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUMvQixDQUFDO0lBRUQsMEJBQTBCO0lBRTFCLDRDQUFrQixHQUFsQixVQUFtQixLQUFZO1FBQzdCLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDckMsSUFBSSxNQUFNLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDeEMsT0FBTyxNQUFNLENBQUE7U0FDZDtJQUNILENBQUM7SUFFRCw2Q0FBbUIsR0FBbkIsVUFBb0IsT0FBZ0IsRUFBRSxNQUFjO1FBQ2xELElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDNUIsQ0FBQztJQUVELCtDQUFxQixHQUFyQixVQUFzQixPQUFnQixFQUFFLE1BQWM7UUFDcEQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQy9CLENBQUM7SUFDSCxzQkFBQztBQUFELENBQUMsQUFsRkQsSUFrRkMifQ==","import { BindingObserver } from \"./binding_observer\";\nvar Context = /** @class */ (function () {\n    function Context(module, scope) {\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        try {\n            this.controller.initialize();\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    Context.prototype.connect = function () {\n        this.bindingObserver.start();\n        try {\n            this.controller.connect();\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    };\n    Context.prototype.disconnect = function () {\n        try {\n            this.controller.disconnect();\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.bindingObserver.stop();\n    };\n    Object.defineProperty(Context.prototype, \"application\", {\n        get: function () {\n            return this.module.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"identifier\", {\n        get: function () {\n            return this.module.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"dispatcher\", {\n        get: function () {\n            return this.application.dispatcher;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"parentElement\", {\n        get: function () {\n            return this.element.parentElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Error handling\n    Context.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element;\n        detail = Object.assign({ identifier: identifier, controller: controller, element: element }, detail);\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQVFwRDtJQU1FLGlCQUFZLE1BQWMsRUFBRSxLQUFZO1FBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO1FBQ2xCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDeEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBRWpFLElBQUk7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFBO1NBQzdCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx5QkFBeUIsQ0FBQyxDQUFBO1NBQ25EO0lBQ0gsQ0FBQztJQUVELHlCQUFPLEdBQVA7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBRTVCLElBQUk7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFBO1NBQzFCO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx1QkFBdUIsQ0FBQyxDQUFBO1NBQ2pEO0lBQ0gsQ0FBQztJQUVELDRCQUFVLEdBQVY7UUFDRSxJQUFJO1lBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQTtTQUM3QjtRQUFDLE9BQU8sS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsMEJBQTBCLENBQUMsQ0FBQTtTQUNwRDtRQUVELElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDN0IsQ0FBQztJQUVELHNCQUFJLGdDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUE7UUFDL0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwyQkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFVO2FBQWQ7WUFDRSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFBO1FBQ3BDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNEJBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUE7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxrQ0FBYTthQUFqQjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUE7UUFDbkMsQ0FBQzs7O09BQUE7SUFFRCxpQkFBaUI7SUFFakIsNkJBQVcsR0FBWCxVQUFZLEtBQVksRUFBRSxPQUFlLEVBQUUsTUFBbUI7UUFBbkIsdUJBQUEsRUFBQSxXQUFtQjtRQUN0RCxJQUFBLFNBQTBDLEVBQXhDLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSxvQkFBTyxDQUFTO1FBQ2hELE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsVUFBVSxZQUFBLEVBQUUsVUFBVSxZQUFBLEVBQUUsT0FBTyxTQUFBLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUNuRSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsV0FBUyxPQUFTLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDakUsQ0FBQztJQUNILGNBQUM7QUFBRCxDQUFDLEFBdEVELElBc0VDIn0=","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/** @hidden */\nexport function blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: blessControllerConstructor(definition.controllerConstructor)\n    };\n}\nfunction blessControllerConstructor(controllerConstructor) {\n    var constructor = extend(controllerConstructor);\n    constructor.bless();\n    return constructor;\n}\nvar extend = (function () {\n    function extendWithReflect(constructor) {\n        function Controller() {\n            var _newTarget = this && this instanceof Controller ? this.constructor : void 0;\n            return Reflect.construct(constructor, arguments, _newTarget);\n        }\n        Controller.prototype = Object.create(constructor.prototype, {\n            constructor: { value: Controller }\n        });\n        Reflect.setPrototypeOf(Controller, constructor);\n        return Controller;\n    }\n    function testReflectExtension() {\n        var a = function () { this.a.call(this); };\n        var b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b;\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return function (constructor) { return /** @class */ (function (_super) {\n            __extends(Controller, _super);\n            function Controller() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return Controller;\n        }(constructor)); };\n    }\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaW5pdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFPQSxjQUFjO0FBQ2QsTUFBTSwwQkFBMEIsVUFBc0I7SUFDcEQsT0FBTztRQUNMLFVBQVUsRUFBRSxVQUFVLENBQUMsVUFBVTtRQUNqQyxxQkFBcUIsRUFBRSwwQkFBMEIsQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUM7S0FDcEYsQ0FBQTtBQUNILENBQUM7QUFFRCxvQ0FBb0MscUJBQTRDO0lBQzlFLElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQ2pELFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUNuQixPQUFPLFdBQVcsQ0FBQTtBQUNwQixDQUFDO0FBRUQsSUFBTSxNQUFNLEdBQUcsQ0FBQztJQUdkLDJCQUFzRCxXQUFjO1FBQ2xFOztZQUNFLE9BQU8sT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsU0FBUyxhQUFhLENBQUE7UUFDOUQsQ0FBQztRQUVELFVBQVUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFO1lBQzFELFdBQVcsRUFBRSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUU7U0FDbkMsQ0FBQyxDQUFBO1FBRUYsT0FBTyxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUE7UUFDL0MsT0FBTyxVQUFpQixDQUFBO0lBQzFCLENBQUM7SUFFRDtRQUNFLElBQU0sQ0FBQyxHQUFHLGNBQXNCLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUMsQ0FBUSxDQUFBO1FBQzFELElBQU0sQ0FBQyxHQUFHLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzlCLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLGNBQVksQ0FBQyxDQUFBO1FBQzdCLE9BQU8sSUFBSSxDQUFDLENBQUE7SUFDZCxDQUFDO0lBRUQsSUFBSTtRQUNGLG9CQUFvQixFQUFFLENBQUE7UUFDdEIsT0FBTyxpQkFBaUIsQ0FBQTtLQUN6QjtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ2QsT0FBTyxVQUE0QixXQUFjLElBQUs7WUFBeUIsOEJBQVc7WUFBcEM7O1lBQXNDLENBQUM7WUFBRCxpQkFBQztRQUFELENBQUMsQUFBdkMsQ0FBeUIsV0FBVyxJQUFwQyxDQUF1QyxDQUFBO0tBQzlGO0FBQ0gsQ0FBQyxDQUFDLEVBQUUsQ0FBQSJ9","import { Context } from \"./context\";\nimport { blessDefinition } from \"./definition\";\nvar Module = /** @class */ (function () {\n    function Module(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap;\n        this.connectedContexts = new Set;\n    }\n    Object.defineProperty(Module.prototype, \"identifier\", {\n        get: function () {\n            return this.definition.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"controllerConstructor\", {\n        get: function () {\n            return this.definition.controllerConstructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"contexts\", {\n        get: function () {\n            return Array.from(this.connectedContexts);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Module.prototype.connectContextForScope = function (scope) {\n        var context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    };\n    Module.prototype.disconnectContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    };\n    Module.prototype.fetchContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    };\n    return Module;\n}());\nexport { Module };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBRW5DLE9BQU8sRUFBYyxlQUFlLEVBQUUsTUFBTSxjQUFjLENBQUE7QUFHMUQ7SUFNRSxnQkFBWSxXQUF3QixFQUFFLFVBQXNCO1FBQzFELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxPQUFPLENBQUE7UUFDbEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksR0FBRyxDQUFBO0lBQ2xDLENBQUM7SUFFRCxzQkFBSSw4QkFBVTthQUFkO1lBQ0UsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQTtRQUNuQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHlDQUFxQjthQUF6QjtZQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQTtRQUM5QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFRO2FBQVo7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUE7UUFDM0MsQ0FBQzs7O09BQUE7SUFFRCx1Q0FBc0IsR0FBdEIsVUFBdUIsS0FBWTtRQUNqQyxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDaEQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUNuQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDbkIsQ0FBQztJQUVELDBDQUF5QixHQUF6QixVQUEwQixLQUFZO1FBQ3BDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQy9DLElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUN0QyxPQUFPLENBQUMsVUFBVSxFQUFFLENBQUE7U0FDckI7SUFDSCxDQUFDO0lBRU8scUNBQW9CLEdBQTVCLFVBQTZCLEtBQVk7UUFDdkMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDN0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNaLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7WUFDbEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFBO1NBQ3pDO1FBQ0QsT0FBTyxPQUFPLENBQUE7SUFDaEIsQ0FBQztJQUNILGFBQUM7QUFBRCxDQUFDLEFBL0NELElBK0NDIn0=","var DataMap = /** @class */ (function () {\n    function DataMap(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(DataMap.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DataMap.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DataMap.prototype.get = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.getAttribute(key);\n    };\n    DataMap.prototype.set = function (key, value) {\n        key = this.getFormattedKey(key);\n        this.element.setAttribute(key, value);\n        return this.get(key);\n    };\n    DataMap.prototype.has = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.hasAttribute(key);\n    };\n    DataMap.prototype.delete = function (key) {\n        if (this.has(key)) {\n            key = this.getFormattedKey(key);\n            this.element.removeAttribute(key);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    DataMap.prototype.getFormattedKey = function (key) {\n        return \"data-\" + this.identifier + \"-\" + dasherize(key);\n    };\n    return DataMap;\n}());\nexport { DataMap };\nfunction dasherize(value) {\n    return value.replace(/([A-Z])/g, function (_, char) { return \"-\" + char.toLowerCase(); });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YV9tYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGF0YV9tYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7SUFHRSxpQkFBWSxLQUFZO1FBQ3RCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0lBQ3BCLENBQUM7SUFFRCxzQkFBSSw0QkFBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFVO2FBQWQ7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFBO1FBQzlCLENBQUM7OztPQUFBO0lBRUQscUJBQUcsR0FBSCxVQUFJLEdBQVc7UUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7SUFFRCxxQkFBRyxHQUFILFVBQUksR0FBVyxFQUFFLEtBQWE7UUFDNUIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN0QixDQUFDO0lBRUQscUJBQUcsR0FBSCxVQUFJLEdBQVc7UUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUMvQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7SUFFRCx3QkFBTSxHQUFOLFVBQU8sR0FBVztRQUNoQixJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDakIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDakMsT0FBTyxJQUFJLENBQUE7U0FDWjthQUFNO1lBQ0wsT0FBTyxLQUFLLENBQUE7U0FDYjtJQUNILENBQUM7SUFFTyxpQ0FBZSxHQUF2QixVQUF3QixHQUFXO1FBQ2pDLE9BQU8sVUFBUSxJQUFJLENBQUMsVUFBVSxTQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUcsQ0FBQTtJQUNwRCxDQUFDO0lBQ0gsY0FBQztBQUFELENBQUMsQUE1Q0QsSUE0Q0M7O0FBRUQsbUJBQW1CLEtBQWE7SUFDOUIsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxVQUFDLENBQUMsRUFBRSxJQUFJLElBQUssT0FBQSxNQUFJLElBQUksQ0FBQyxXQUFXLEVBQUksRUFBeEIsQ0FBd0IsQ0FBQyxDQUFBO0FBQ3pFLENBQUMifQ==","/** @hidden */\nexport function attributeValueContainsToken(attributeName, token) {\n    return \"[\" + attributeName + \"~=\\\"\" + token + \"\\\"]\";\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0b3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NlbGVjdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxjQUFjO0FBQ2QsTUFBTSxzQ0FBc0MsYUFBcUIsRUFBRSxLQUFhO0lBQzlFLE9BQU8sTUFBSSxhQUFhLFlBQU0sS0FBSyxRQUFJLENBQUE7QUFDekMsQ0FBQyJ9","import { attributeValueContainsToken } from \"./selectors\";\nvar TargetSet = /** @class */ (function () {\n    function TargetSet(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(TargetSet.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"schema\", {\n        get: function () {\n            return this.scope.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TargetSet.prototype.has = function (targetName) {\n        return this.find(targetName) != null;\n    };\n    TargetSet.prototype.find = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findElement(selector);\n    };\n    TargetSet.prototype.findAll = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findAllElements(selector);\n    };\n    TargetSet.prototype.getSelectorForTargetNames = function (targetNames) {\n        var _this = this;\n        return targetNames.map(function (targetName) { return _this.getSelectorForTargetName(targetName); }).join(\", \");\n    };\n    TargetSet.prototype.getSelectorForTargetName = function (targetName) {\n        var targetDescriptor = this.identifier + \".\" + targetName;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    };\n    return TargetSet;\n}());\nexport { TargetSet };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3NldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90YXJnZXRfc2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQUdFLG1CQUFZLEtBQVk7UUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDcEIsQ0FBQztJQUVELHNCQUFJLDhCQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksaUNBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUE7UUFDOUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw2QkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQTtRQUMxQixDQUFDOzs7T0FBQTtJQUVELHVCQUFHLEdBQUgsVUFBSSxVQUFrQjtRQUNwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFBO0lBQ3RDLENBQUM7SUFFRCx3QkFBSSxHQUFKO1FBQUsscUJBQXdCO2FBQXhCLFVBQXdCLEVBQXhCLHFCQUF3QixFQUF4QixJQUF3QjtZQUF4QixnQ0FBd0I7O1FBQzNCLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUM1RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFRCwyQkFBTyxHQUFQO1FBQVEscUJBQXdCO2FBQXhCLFVBQXdCLEVBQXhCLHFCQUF3QixFQUF4QixJQUF3QjtZQUF4QixnQ0FBd0I7O1FBQzlCLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUM1RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzdDLENBQUM7SUFFTyw2Q0FBeUIsR0FBakMsVUFBa0MsV0FBcUI7UUFBdkQsaUJBRUM7UUFEQyxPQUFPLFdBQVcsQ0FBQyxHQUFHLENBQUMsVUFBQSxVQUFVLElBQUksT0FBQSxLQUFJLENBQUMsd0JBQXdCLENBQUMsVUFBVSxDQUFDLEVBQXpDLENBQXlDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDNUYsQ0FBQztJQUVPLDRDQUF3QixHQUFoQyxVQUFpQyxVQUFrQjtRQUNqRCxJQUFNLGdCQUFnQixHQUFNLElBQUksQ0FBQyxVQUFVLFNBQUksVUFBWSxDQUFBO1FBQzNELE9BQU8sMkJBQTJCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtJQUNuRixDQUFDO0lBQ0gsZ0JBQUM7QUFBRCxDQUFDLEFBekNELElBeUNDIn0=","import { DataMap } from \"./data_map\";\nimport { TargetSet } from \"./target_set\";\nimport { attributeValueContainsToken } from \"./selectors\";\nvar Scope = /** @class */ (function () {\n    function Scope(schema, identifier, element) {\n        this.schema = schema;\n        this.identifier = identifier;\n        this.element = element;\n        this.targets = new TargetSet(this);\n        this.data = new DataMap(this);\n    }\n    Scope.prototype.findElement = function (selector) {\n        return this.findAllElements(selector)[0];\n    };\n    Scope.prototype.findAllElements = function (selector) {\n        var head = this.element.matches(selector) ? [this.element] : [];\n        var tail = this.filterElements(Array.from(this.element.querySelectorAll(selector)));\n        return head.concat(tail);\n    };\n    Scope.prototype.filterElements = function (elements) {\n        var _this = this;\n        return elements.filter(function (element) { return _this.containsElement(element); });\n    };\n    Scope.prototype.containsElement = function (element) {\n        return element.closest(this.controllerSelector) === this.element;\n    };\n    Object.defineProperty(Scope.prototype, \"controllerSelector\", {\n        get: function () {\n            return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Scope;\n}());\nexport { Scope };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NvcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQTtBQUVwQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3hDLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQU9FLGVBQVksTUFBYyxFQUFFLFVBQWtCLEVBQUUsT0FBZ0I7UUFDOUQsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQy9CLENBQUM7SUFFRCwyQkFBVyxHQUFYLFVBQVksUUFBZ0I7UUFDMUIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzFDLENBQUM7SUFFRCwrQkFBZSxHQUFmLFVBQWdCLFFBQWdCO1FBQzlCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQ2pFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNyRixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDMUIsQ0FBQztJQUVELDhCQUFjLEdBQWQsVUFBZSxRQUFtQjtRQUFsQyxpQkFFQztRQURDLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFBLE9BQU8sSUFBSSxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQTdCLENBQTZCLENBQUMsQ0FBQTtJQUNsRSxDQUFDO0lBRUQsK0JBQWUsR0FBZixVQUFnQixPQUFnQjtRQUM5QixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUNsRSxDQUFDO0lBRUQsc0JBQVkscUNBQWtCO2FBQTlCO1lBQ0UsT0FBTywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN0RixDQUFDOzs7T0FBQTtJQUNILFlBQUM7QUFBRCxDQUFDLEFBcENELElBb0NDIn0=","import { Scope } from \"./scope\";\nimport { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar ScopeObserver = /** @class */ (function () {\n    function ScopeObserver(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap;\n        this.scopeReferenceCounts = new WeakMap;\n    }\n    ScopeObserver.prototype.start = function () {\n        this.valueListObserver.start();\n    };\n    ScopeObserver.prototype.stop = function () {\n        this.valueListObserver.stop();\n    };\n    Object.defineProperty(ScopeObserver.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Value observer delegate\n    /** @hidden */\n    ScopeObserver.prototype.parseValueForToken = function (token) {\n        var element = token.element, identifier = token.content;\n        var scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        var scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = new Scope(this.schema, identifier, element);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementMatchedValue = function (element, value) {\n        var referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementUnmatchedValue = function (element, value) {\n        var referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    };\n    ScopeObserver.prototype.fetchScopesByIdentifierForElement = function (element) {\n        var scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map;\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    };\n    return ScopeObserver;\n}());\nexport { ScopeObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGVfb2JzZXJ2ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NvcGVfb2JzZXJ2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQUMvQixPQUFPLEVBQVMsaUJBQWlCLEVBQTZCLE1BQU0sOEJBQThCLENBQUE7QUFPbEc7SUFRRSx1QkFBWSxPQUFnQixFQUFFLE1BQWMsRUFBRSxRQUErQjtRQUMzRSxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtRQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQTtRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUM1RixJQUFJLENBQUMsMkJBQTJCLEdBQUcsSUFBSSxPQUFPLENBQUE7UUFDOUMsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksT0FBTyxDQUFBO0lBQ3pDLENBQUM7SUFFRCw2QkFBSyxHQUFMO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2hDLENBQUM7SUFFRCw0QkFBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFBO0lBQy9CLENBQUM7SUFFRCxzQkFBSSw4Q0FBbUI7YUFBdkI7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUE7UUFDeEMsQ0FBQzs7O09BQUE7SUFFRCwwQkFBMEI7SUFFMUIsY0FBYztJQUNkLDBDQUFrQixHQUFsQixVQUFtQixLQUFZO1FBQ3JCLElBQUEsdUJBQU8sRUFBRSwwQkFBbUIsQ0FBVTtRQUM5QyxJQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUUxRSxJQUFJLEtBQUssR0FBRyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDOUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNWLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQTtZQUNuRCxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFBO1NBQzFDO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDZCxDQUFDO0lBRUQsY0FBYztJQUNkLDJDQUFtQixHQUFuQixVQUFvQixPQUFnQixFQUFFLEtBQVk7UUFDaEQsSUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN0RSxJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxjQUFjLENBQUMsQ0FBQTtRQUNwRCxJQUFJLGNBQWMsSUFBSSxDQUFDLEVBQUU7WUFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDcEM7SUFDSCxDQUFDO0lBRUQsY0FBYztJQUNkLDZDQUFxQixHQUFyQixVQUFzQixPQUFnQixFQUFFLEtBQVk7UUFDbEQsSUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUMzRCxJQUFJLGNBQWMsRUFBRTtZQUNsQixJQUFJLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxjQUFjLEdBQUcsQ0FBQyxDQUFDLENBQUE7WUFDeEQsSUFBSSxjQUFjLElBQUksQ0FBQyxFQUFFO2dCQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFBO2FBQ3ZDO1NBQ0Y7SUFDSCxDQUFDO0lBRU8seURBQWlDLEdBQXpDLFVBQTBDLE9BQWdCO1FBQ3hELElBQUksa0JBQWtCLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUN0RSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7WUFDdkIsa0JBQWtCLEdBQUcsSUFBSSxHQUFHLENBQUE7WUFDNUIsSUFBSSxDQUFDLDJCQUEyQixDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtTQUNsRTtRQUNELE9BQU8sa0JBQWtCLENBQUE7SUFDM0IsQ0FBQztJQUNILG9CQUFDO0FBQUQsQ0FBQyxBQXpFRCxJQXlFQyJ9","import { Module } from \"./module\";\nimport { Multimap } from \"@stimulus/multimap\";\nimport { ScopeObserver } from \"./scope_observer\";\nvar Router = /** @class */ (function () {\n    function Router(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap;\n        this.modulesByIdentifier = new Map;\n    }\n    Object.defineProperty(Router.prototype, \"element\", {\n        get: function () {\n            return this.application.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"modules\", {\n        get: function () {\n            return Array.from(this.modulesByIdentifier.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"contexts\", {\n        get: function () {\n            return this.modules.reduce(function (contexts, module) { return contexts.concat(module.contexts); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Router.prototype.start = function () {\n        this.scopeObserver.start();\n    };\n    Router.prototype.stop = function () {\n        this.scopeObserver.stop();\n    };\n    Router.prototype.loadDefinition = function (definition) {\n        this.unloadIdentifier(definition.identifier);\n        var module = new Module(this.application, definition);\n        this.connectModule(module);\n    };\n    Router.prototype.unloadIdentifier = function (identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    };\n    Router.prototype.getContextForElementAndIdentifier = function (element, identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find(function (context) { return context.element == element; });\n        }\n    };\n    // Error handler delegate\n    /** @hidden */\n    Router.prototype.handleError = function (error, message, detail) {\n        this.application.handleError(error, message, detail);\n    };\n    // Scope observer delegate\n    /** @hidden */\n    Router.prototype.scopeConnected = function (scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    };\n    /** @hidden */\n    Router.prototype.scopeDisconnected = function (scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    };\n    // Modules\n    Router.prototype.connectModule = function (module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.connectContextForScope(scope); });\n    };\n    Router.prototype.disconnectModule = function (module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.disconnectContextForScope(scope); });\n    };\n    return Router;\n}());\nexport { Router };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3JvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBQ2pDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUc3QyxPQUFPLEVBQUUsYUFBYSxFQUF5QixNQUFNLGtCQUFrQixDQUFBO0FBRXZFO0lBTUUsZ0JBQVksV0FBd0I7UUFDbEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUE7UUFDOUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDdkUsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksUUFBUSxDQUFBO1FBQ3RDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNwQyxDQUFDO0lBRUQsc0JBQUksMkJBQU87YUFBWDtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUE7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwwQkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHVDQUFtQjthQUF2QjtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQTtRQUN4QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDJCQUFPO2FBQVg7WUFDRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7UUFDdEQsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0QkFBUTthQUFaO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFDLFFBQVEsRUFBRSxNQUFNLElBQUssT0FBQSxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBaEMsQ0FBZ0MsRUFBRSxFQUFlLENBQUMsQ0FBQTtRQUNyRyxDQUFDOzs7T0FBQTtJQUVELHNCQUFLLEdBQUw7UUFDRSxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFBO0lBQzVCLENBQUM7SUFFRCxxQkFBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUMzQixDQUFDO0lBRUQsK0JBQWMsR0FBZCxVQUFlLFVBQXNCO1FBQ25DLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDNUMsSUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQTtRQUN2RCxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQzVCLENBQUM7SUFFRCxpQ0FBZ0IsR0FBaEIsVUFBaUIsVUFBa0I7UUFDakMsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN2RCxJQUFJLE1BQU0sRUFBRTtZQUNWLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUM5QjtJQUNILENBQUM7SUFFRCxrREFBaUMsR0FBakMsVUFBa0MsT0FBZ0IsRUFBRSxVQUFrQjtRQUNwRSxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3ZELElBQUksTUFBTSxFQUFFO1lBQ1YsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFBLE9BQU8sSUFBSSxPQUFBLE9BQU8sQ0FBQyxPQUFPLElBQUksT0FBTyxFQUExQixDQUEwQixDQUFDLENBQUE7U0FDbkU7SUFDSCxDQUFDO0lBRUQseUJBQXlCO0lBRXpCLGNBQWM7SUFDZCw0QkFBVyxHQUFYLFVBQVksS0FBWSxFQUFFLE9BQWUsRUFBRSxNQUFXO1FBQ3BELElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDdEQsQ0FBQztJQUVELDBCQUEwQjtJQUUxQixjQUFjO0lBQ2QsK0JBQWMsR0FBZCxVQUFlLEtBQVk7UUFDekIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3BELElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdELElBQUksTUFBTSxFQUFFO1lBQ1YsTUFBTSxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFBO1NBQ3JDO0lBQ0gsQ0FBQztJQUVELGNBQWM7SUFDZCxrQ0FBaUIsR0FBakIsVUFBa0IsS0FBWTtRQUM1QixJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUE7UUFDdkQsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDN0QsSUFBSSxNQUFNLEVBQUU7WUFDVixNQUFNLENBQUMseUJBQXlCLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDeEM7SUFDSCxDQUFDO0lBRUQsVUFBVTtJQUVGLDhCQUFhLEdBQXJCLFVBQXNCLE1BQWM7UUFDbEMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFBO1FBQ3ZELElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3pFLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxNQUFNLENBQUMsc0JBQXNCLENBQUMsS0FBSyxDQUFDLEVBQXBDLENBQW9DLENBQUMsQ0FBQTtJQUMvRCxDQUFDO0lBRU8saUNBQWdCLEdBQXhCLFVBQXlCLE1BQWM7UUFDckMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDbEQsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDekUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsRUFBdkMsQ0FBdUMsQ0FBQyxDQUFBO0lBQ2xFLENBQUM7SUFDSCxhQUFDO0FBQUQsQ0FBQyxBQXJHRCxJQXFHQyJ9","export var defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\"\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NjaGVtYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxNQUFNLENBQUMsSUFBTSxhQUFhLEdBQVc7SUFDbkMsbUJBQW1CLEVBQUUsaUJBQWlCO0lBQ3RDLGVBQWUsRUFBRSxhQUFhO0lBQzlCLGVBQWUsRUFBRSxhQUFhO0NBQy9CLENBQUEifQ==","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Dispatcher } from \"./dispatcher\";\nimport { Router } from \"./router\";\nimport { defaultSchema } from \"./schema\";\nvar Application = /** @class */ (function () {\n    function Application(element, schema) {\n        if (element === void 0) { element = document.documentElement; }\n        if (schema === void 0) { schema = defaultSchema; }\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n    }\n    Application.start = function (element, schema) {\n        var application = new Application(element, schema);\n        application.start();\n        return application;\n    };\n    Application.prototype.start = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, domReady()];\n                    case 1:\n                        _a.sent();\n                        this.router.start();\n                        this.dispatcher.start();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Application.prototype.stop = function () {\n        this.router.stop();\n        this.dispatcher.stop();\n    };\n    Application.prototype.register = function (identifier, controllerConstructor) {\n        this.load({ identifier: identifier, controllerConstructor: controllerConstructor });\n    };\n    Application.prototype.load = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var definitions = Array.isArray(head) ? head : [head].concat(rest);\n        definitions.forEach(function (definition) { return _this.router.loadDefinition(definition); });\n    };\n    Application.prototype.unload = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var identifiers = Array.isArray(head) ? head : [head].concat(rest);\n        identifiers.forEach(function (identifier) { return _this.router.unloadIdentifier(identifier); });\n    };\n    Object.defineProperty(Application.prototype, \"controllers\", {\n        // Controllers\n        get: function () {\n            return this.router.contexts.map(function (context) { return context.controller; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Application.prototype.getControllerForElementAndIdentifier = function (element, identifier) {\n        var context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    };\n    // Error handling\n    Application.prototype.handleError = function (error, message, detail) {\n        console.error(\"%s\\n\\n%o\\n\\n%o\", message, error, detail);\n    };\n    return Application;\n}());\nexport { Application };\nfunction domReady() {\n    return new Promise(function (resolve) {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", resolve);\n        }\n        else {\n            resolve();\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwbGljYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXBwbGljYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBRXpDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFVLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUVoRDtJQVlFLHFCQUFZLE9BQTJDLEVBQUUsTUFBOEI7UUFBM0Usd0JBQUEsRUFBQSxVQUFtQixRQUFRLENBQUMsZUFBZTtRQUFFLHVCQUFBLEVBQUEsc0JBQThCO1FBQ3JGLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNoQyxDQUFDO0lBWE0saUJBQUssR0FBWixVQUFhLE9BQWlCLEVBQUUsTUFBZTtRQUM3QyxJQUFNLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDcEQsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ25CLE9BQU8sV0FBVyxDQUFBO0lBQ3BCLENBQUM7SUFTSywyQkFBSyxHQUFYOzs7OzRCQUNFLHFCQUFNLFFBQVEsRUFBRSxFQUFBOzt3QkFBaEIsU0FBZ0IsQ0FBQTt3QkFDaEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTt3QkFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQTs7Ozs7S0FDeEI7SUFFRCwwQkFBSSxHQUFKO1FB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","/** @hidden */\nexport function defineTargetProperties(constructor) {\n    var prototype = constructor.prototype;\n    var targetNames = getTargetNamesForConstructor(constructor);\n    targetNames.forEach(function (name) {\n        var _a;\n        return defineLinkedProperties(prototype, (_a = {},\n            _a[name + \"Target\"] = {\n                get: function () {\n                    var target = this.targets.find(name);\n                    if (target) {\n                        return target;\n                    }\n                    else {\n                        throw new Error(\"Missing target element \\\"\" + this.identifier + \".\" + name + \"\\\"\");\n                    }\n                }\n            },\n            _a[name + \"Targets\"] = {\n                get: function () {\n                    return this.targets.findAll(name);\n                }\n            },\n            _a[\"has\" + capitalize(name) + \"Target\"] = {\n                get: function () {\n                    return this.targets.has(name);\n                }\n            },\n            _a));\n    });\n}\nfunction getTargetNamesForConstructor(constructor) {\n    var ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce(function (targetNames, constructor) {\n        getOwnTargetNamesForConstructor(constructor).forEach(function (name) { return targetNames.add(name); });\n        return targetNames;\n    }, new Set));\n}\nfunction getAncestorsForConstructor(constructor) {\n    var ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors;\n}\nfunction getOwnTargetNamesForConstructor(constructor) {\n    var definition = constructor[\"targets\"];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction defineLinkedProperties(object, properties) {\n    Object.keys(properties).forEach(function (name) {\n        if (!(name in object)) {\n            var descriptor = properties[name];\n            Object.defineProperty(object, name, descriptor);\n        }\n    });\n}\nfunction capitalize(name) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3Byb3BlcnRpZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdGFyZ2V0X3Byb3BlcnRpZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsY0FBYztBQUNkLE1BQU0saUNBQWlDLFdBQXFCO0lBQzFELElBQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUE7SUFDdkMsSUFBTSxXQUFXLEdBQUcsNEJBQTRCLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDN0QsV0FBVyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7O1FBQUksT0FBQSxzQkFBc0IsQ0FBQyxTQUFTO1lBQzFELEdBQUksSUFBSSxXQUFRLElBQUc7Z0JBQ2pCLEdBQUc7b0JBQ0QsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7b0JBQ3RDLElBQUksTUFBTSxFQUFFO3dCQUNWLE9BQU8sTUFBTSxDQUFBO3FCQUNkO3lCQUFNO3dCQUNMLE1BQU0sSUFBSSxLQUFLLENBQUMsOEJBQTJCLElBQUksQ0FBQyxVQUFVLFNBQUksSUFBSSxPQUFHLENBQUMsQ0FBQTtxQkFDdkU7Z0JBQ0gsQ0FBQzthQUNGO1lBQ0QsR0FBSSxJQUFJLFlBQVMsSUFBRztnQkFDbEIsR0FBRztvQkFDRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNuQyxDQUFDO2FBQ0Y7WUFDRCxHQUFDLFFBQU0sVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFRLElBQUc7Z0JBQ2hDLEdBQUc7b0JBQ0QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDL0IsQ0FBQzthQUNGO2dCQUNEO0lBckIwQixDQXFCMUIsQ0FBQyxDQUFBO0FBQ0wsQ0FBQztBQUVELHNDQUFzQyxXQUFxQjtJQUN6RCxJQUFNLFNBQVMsR0FBRywwQkFBMEIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtJQUN6RCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFDLFdBQVcsRUFBRSxXQUFXO1FBQzFELCtCQUErQixDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUksSUFBSSxPQUFBLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQXJCLENBQXFCLENBQUMsQ0FBQTtRQUNuRixPQUFPLFdBQVcsQ0FBQTtJQUNwQixDQUFDLEVBQUUsSUFBSSxHQUFrQixDQUFDLENBQUMsQ0FBQTtBQUM3QixDQUFDO0FBRUQsb0NBQW9DLFdBQXFCO0lBQ3ZELElBQU0sU0FBUyxHQUFlLEVBQUUsQ0FBQTtJQUNoQyxPQUFPLFdBQVcsRUFBRTtRQUNsQixTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzNCLFdBQVcsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFBO0tBQ2pEO0lBQ0QsT0FBTyxTQUFTLENBQUE7QUFDbEIsQ0FBQztBQUVELHlDQUF5QyxXQUFxQjtJQUM1RCxJQUFNLFVBQVUsR0FBSSxXQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ2xELE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7QUFDcEQsQ0FBQztBQUVELGdDQUFnQyxNQUFXLEVBQUUsVUFBaUM7SUFDNUUsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJO1FBQ25DLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsRUFBRTtZQUNyQixJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDbkMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFBO1NBQ2hEO0lBQ0gsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBRUQsb0JBQW9CLElBQVk7SUFDOUIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDckQsQ0FBQyJ9","import { defineTargetProperties } from \"./target_properties\";\nvar Controller = /** @class */ (function () {\n    function Controller(context) {\n        this.context = context;\n    }\n    Controller.bless = function () {\n        defineTargetProperties(this);\n    };\n    Object.defineProperty(Controller.prototype, \"application\", {\n        get: function () {\n            return this.context.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"targets\", {\n        get: function () {\n            return this.scope.targets;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"data\", {\n        get: function () {\n            return this.scope.data;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Controller.prototype.initialize = function () {\n        // Override in your subclass to set up initial controller state\n    };\n    Controller.prototype.connect = function () {\n        // Override in your subclass to respond when the controller is connected to the DOM\n    };\n    Controller.prototype.disconnect = function () {\n        // Override in your subclass to respond when the controller is disconnected from the DOM\n    };\n    Controller.targets = [];\n    return Controller;\n}());\nexport { Controller };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHFCQUFxQixDQUFBO0FBTzVEO0lBU0Usb0JBQVksT0FBZ0I7UUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7SUFDeEIsQ0FBQztJQU5NLGdCQUFLLEdBQVo7UUFDRSxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM5QixDQUFDO0lBTUQsc0JBQUksbUNBQVc7YUFBZjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUE7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw2QkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksa0NBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUE7UUFDOUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwrQkFBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFJO2FBQVI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFBO1FBQ3hCLENBQUM7OztPQUFBO0lBRUQsK0JBQVUsR0FBVjtRQUNFLCtEQUErRDtJQUNqRSxDQUFDO0lBRUQsNEJBQU8sR0FBUDtRQUNFLG1GQUFtRjtJQUNyRixDQUFDO0lBRUQsK0JBQVUsR0FBVjtRQUNFLHdGQUF3RjtJQUMxRixDQUFDO0lBOUNNLGtCQUFPLEdBQWEsRUFBRSxDQUFBO0lBK0MvQixpQkFBQztDQUFBLEFBaERELElBZ0RDO1NBaERZLFVBQVUifQ==","import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n    initialize() {\n        const baseURI = document.baseURI;\n\n        if (document.referrer.includes(baseURI)) {\n            window.location.replace(this.data.get('url'));\n        }\n    }\n}\n","import Turbolinks from 'turbolinks';\n\nimport { Application } from 'stimulus';\nimport { definitionsFromContext } from 'stimulus/webpack-helpers';\n\nconst application = Application.start();\nconst context = require.context('./controllers', true, /\\.js$/);\napplication.load(definitionsFromContext(context));\n\nTurbolinks.start();\n","export function definitionsFromContext(context) {\n    return context.keys()\n        .map(function (key) { return definitionForModuleWithContextAndKey(context, key); })\n        .filter(function (value) { return value; });\n}\nfunction definitionForModuleWithContextAndKey(context, key) {\n    var identifier = identifierForContextKey(key);\n    if (identifier) {\n        return definitionForModuleAndIdentifier(context(key), identifier);\n    }\n}\nfunction definitionForModuleAndIdentifier(module, identifier) {\n    var controllerConstructor = module.default;\n    if (typeof controllerConstructor == \"function\") {\n        return { identifier: identifier, controllerConstructor: controllerConstructor };\n    }\n}\nexport function identifierForContextKey(key) {\n    var logicalName = (key.match(/^(?:\\.\\/)?(.+)(?:[_-]controller\\..+?)$/) || [])[1];\n    if (logicalName) {\n        return logicalName.replace(/_/g, \"-\").replace(/\\//g, \"--\");\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxNQUFNLGlDQUFpQyxPQUEwQztJQUMvRSxPQUFPLE9BQU8sQ0FBQyxJQUFJLEVBQUU7U0FDbEIsR0FBRyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsb0NBQW9DLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxFQUFsRCxDQUFrRCxDQUFDO1NBQzlELE1BQU0sQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLEtBQUssRUFBTCxDQUFLLENBQWlCLENBQUE7QUFDM0MsQ0FBQztBQUVELDhDQUE4QyxPQUEwQyxFQUFFLEdBQVc7SUFDbkcsSUFBTSxVQUFVLEdBQUcsdUJBQXVCLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDL0MsSUFBSSxVQUFVLEVBQUU7UUFDZCxPQUFPLGdDQUFnQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQTtLQUNsRTtBQUNILENBQUM7QUFFRCwwQ0FBMEMsTUFBd0IsRUFBRSxVQUFrQjtJQUNwRixJQUFNLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUE7SUFDNUMsSUFBSSxPQUFPLHFCQUFxQixJQUFJLFVBQVUsRUFBRTtRQUM5QyxPQUFPLEVBQUUsVUFBVSxZQUFBLEVBQUUscUJBQXFCLHVCQUFBLEVBQUUsQ0FBQTtLQUM3QztBQUNILENBQUM7QUFFRCxNQUFNLGtDQUFrQyxHQUFXO0lBQ2pELElBQU0sV0FBVyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2xGLElBQUksV0FBVyxFQUFFO1FBQ2YsT0FBTyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFBO0tBQzNEO0FBQ0gsQ0FBQyJ9","var map = {\n\t\"./current_time_controller.js\": \"8LWa\",\n\t\"./news_controller.js\": \"5Esp\",\n\t\"./one_news_controller.js\": \"aqPT\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"jiIp\";","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n"],"sourceRoot":""}